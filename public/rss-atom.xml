<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://github.com/nostrss</id>
    <title>Nostrss's Dev Blog</title>
    <updated>2023-09-08T01:49:31.455Z</updated>
    <generator>generate-rss</generator>
    <author>
        <name>Nostrss</name>
        <email>jintagi@gmail.com</email>
        <uri>https://github.com/nostrss</uri>
    </author>
    <link rel="alternate" href="https://github.com/nostrss"/>
    <link rel="self" href="https://nostrss.me/rss-atom.xml"/>
    <subtitle>Nostrss Blog Post List</subtitle>
    <category term="Technologies"/>
    <entry>
        <title type="html"><![CDATA[Next.js 13 í”„ë¡œì íŠ¸ yarn berryë¡œ ì „í™˜í•˜ê¸°]]></title>
        <id>2023-09-04-154-next-yarnberry</id>
        <link href="https://nostrss.me/2023-09-04-154-next-yarnberry"/>
        <updated>2023-10-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Next.js 13 í”„ë¡œì íŠ¸ë¥¼ yarn berryë¡œ ì „í™˜í•˜ëŠ” ë°©ë²•]]></summary>
        <content type="html"><![CDATA[

## ì„¤ì¹˜ í™˜ê²½ ë²„ì „ ì •ë³´

> node : 18.13.0

> yarn : 3.6.3

> next : 13.4.19

## next.js í”„ë¡œì íŠ¸ ìƒì„±

ë¨¼ì € `next.js` í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ì.

ì¼ë°˜ì ìœ¼ë¡œ ê°€ì¥ ë§ì´ ì„¤ì¹˜í•˜ëŠ” `npx create-next-app`ì„ ì‚¬ìš©í•˜ì—¬ ì„¤ì¹˜í–ˆë‹¤.

```bash
npx create-next-app@latest yarnberry-next13
```

<img width="727" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-09-04 á„‹á…©á„Œá…¥á†« 11 38 16" src="https://github.com/nostrss/nostrss.github.io/assets/56717167/7ef88b1c-161d-4b6d-87e8-33e4d670c6fe">

## node_modules ì‚­ì œ

ì„¤ì¹˜ê°€ ì™„ë£Œë˜ë©´ next.js í”„ë¡œì íŠ¸ë¥¼ `vscode`ë¡œ ì—´ì–´ë³´ì.

`yarnberry`ë¥¼ ì‚¬ìš©í•˜ë©´ ì•ìœ¼ë¡œ `node_modules`ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê²Œ ë˜ê¸° ë•Œë¬¸ì—, ê¸°ì¡´ì— ì„¤ì¹˜ëœ `node_modules`ë¥¼ ì‚­ì œí•´ì¤¬ë‹¤.

<img width="1392" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-09-04 á„‹á…©á„Œá…¥á†« 11 40 56" src="https://github.com/nostrss/nostrss.github.io/assets/56717167/d9ddd389-4f1e-4030-952b-6f63f074bd49">

## yarnberry ë²„ì „ìœ¼ë¡œ ì „í™˜

ì´ì œ `yarn berry` ë²„ì „ìœ¼ë¡œ ì „í™˜í•´ë³´ì. ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ì¤¬ë‹¤.

```bash
yarn set version berry
```

ìœ„ ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ì‹¤í–‰ë˜ë©´ì„œ `yarnberry` ë²„ì „ìœ¼ë¡œ ì „í™˜ëœë‹¤.

ì¡°ê¸ˆì€ ìƒì†Œí•œ ì‹¤í–‰í™”ë©´ê³¼ í•¨ê»˜ ì•„ë˜ì™€ ê°™ì´ ì§„í–‰ëœë‹¤.

<img width="771" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-09-04 á„‹á…©á„Œá…¥á†« 11 45 30" src="https://github.com/nostrss/nostrss.github.io/assets/56717167/7415fb32-01e7-4830-98c5-18304098c1b4">

## yarnberry ëª¨ë“œì—ì„œ íŒ¨í‚¤ì§€ ì¬ì„¤ì¹˜

ì ì´ì œ ì‚­ì œí•œ íŒ¨í‚¤ì§€ë¥¼ `yarnberry` ëª¨ë“œì—ì„œ ì¬ì„¤ì¹˜ í•´ë³´ì. ì„¤ì¹˜ ëª…ë ¹ì–´ëŠ” ê¸°ì¡´ê³¼ ë™ì¼í•˜ë‹¤.

```bash
yarn install
```

<img width="771" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-09-04 á„‹á…©á„Œá…¥á†« 11 49 26" src="https://github.com/nostrss/nostrss.github.io/assets/56717167/90370a8b-cddc-4633-8262-e562837313be">

ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì–´ `vscode`ë¥¼ ë‹¤ì‹œ í™•ì¸í•´ë´¤ë‹¤.

ì´ì œëŠ” íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ì—¬ë„ `node_modules`ê°€ ìƒì„±ë˜ì§€ ì•ŠëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.

ê·¸ë¦¬ê³  ìƒì„±ëœ `.yarn/cache` í´ë”ë¥¼ ì‚´í´ë´¤ë‹¤.

<img width="1392" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-09-04 á„‹á…©á„’á…® 12 12 40" src="https://github.com/nostrss/nostrss.github.io/assets/56717167/9058cfb3-e1be-49c7-a443-c85c89a07ab0">

íŒ¨í‚¤ì§€ë“¤ì´ ì••ì¶•íŒŒì¼ë¡œ ì €ì¥ë˜ì–´ ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.

ê¸°ì¡´ì—ëŠ” `node_modules` í´ë” ìš©ëŸ‰ì´ ì»¤ì„œ `github`ì— í‘¸ì‰¬í•˜ì§€ ì•ŠëŠ”ê²ƒì´ ì¼ë°˜ì ì´ì—ˆë‹¤.

ê·¸ë ‡ê¸° ë•Œë¬¸ì— ê³µë™ì‘ì—…ìê°€ ìˆì„ ê²½ìš°, ì†ŒìŠ¤ì½”ë“œë¥¼ ë°›ì•„ì„œ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” íŒ¨í‚¤ì§€ë¥¼ npmì—ì„œ ì¬ì„¤ì¹˜ í•´ì•¼í–ˆë‹¤.

ê·¸ë¦¬ê³  ë§Œì•½ ì´ ê³¼ì •ì—ì„œ npm íŒ¨í‚¤ì§€ì—ì„œ ì‚¬ë¼ì§„ ê²ƒì´ ìˆë‹¤ë©´, ì†ŒìŠ¤ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ì—†ëŠ” ìƒí™©ì´ ë°œìƒí•  ìˆ˜ë„ ìˆì—ˆë‹¤.

_**í•˜ì§€ë§Œ `yarnberry` ëª¨ë“œì—ì„œ íŒ¨í‚¤ì§€ë“¤ì€ ì••ì¶•ë˜ì–´ ìš©ëŸ‰ì´ ì‘ê¸° ë•Œë¬¸ì—, githubì— ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ë“¤ì„ í•¨ê»˜ í‘¸ì‰¬í•œë‹¤ê³  í•œë‹¤. ì´ë¡œì„œ ê³µë™ì‘ì—…ìëŠ” ì†ŒìŠ¤ì½”ë“œë¥¼ ë°›ì•„ì„œ ë°”ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.**_

## gitignoreì— ì½”ë“œ ì¶”ê°€

`yarnberry` ëª¨ë“œì— ë§ê²Œ `gitignore`ì— ì½”ë“œë¥¼ ì¶”ê°€í•´ì¤¬ë‹¤.

```
# yarn berry

.yarn/\*
!.yarn/cache
!.yarn/patches
!.yarn/plugins
!.yarn/releases
!.yarn/sdks
!.yarn/versions
```

## typescript ì„¤ì •

> ì´ ë¶€ë¶„ì€ ë§í¬ì˜ ë„ì›€ì„ ë°›ì•„ ì§„í–‰í–ˆë‹¤.

> [ğŸ”— ë¦¬ë©¤ë²„ ì›¹ ì„œë¹„ìŠ¤ ì¢Œì¶©ìš°ëŒ Yarn Berry ë„ì…ê¸° ë°”ë¡œê°€ê¸° ğŸ”—](https://blog.dramancompany.com/2023/02/%EB%A6%AC%EB%A9%A4%EB%B2%84-%EC%9B%B9-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%A2%8C%EC%B6%A9%EC%9A%B0%EB%8F%8C-yarn-berry-%EB%8F%84%EC%9E%85%EA%B8%B0/)

í˜„ì¬ ìƒíƒœì—ì„œ ì‘ì„±ë˜ì–´ ìˆëŠ” ì½”ë“œë¥¼ ë³´ë©´ `typescript` ì—ëŸ¬ê°€ ë°œìƒí•˜ê³  ìˆì—ˆë‹¤.

<img width="1392" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-09-04 á„‹á…©á„Œá…¥á†« 11 53 27" src="https://github.com/nostrss/nostrss.github.io/assets/56717167/a7fdb8fb-116f-4b11-ab08-97ea6b7403d6">

ê¸°ì¡´ì— node_modulesì—ì„œ ëª¨ë“ˆì„ ê°€ì ¸ì˜¤ë˜ ë°©ì‹ì´ ì•„ë‹Œ, yarnberryì—ì„œ ëª¨ë“ˆì„ ê°€ì ¸ì˜¤ëŠ” ë°©ì‹ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆê¸° ë•Œë¬¸ì— ë°œìƒí•˜ëŠ” ì—ëŸ¬ì´ë‹¤.

```bash
yarn dlx @yarnpkg/sdks vscode
```

ìœ„ì˜ ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ vscode ì˜¤ë¥¸ìª½ í•˜ë‹¨ì— ì–¼ëŸ¿ì´ ëœ¬ë‹¤.

<img width="1392" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-09-04 á„‹á…©á„Œá…¥á†« 11 56 06" src="https://github.com/nostrss/nostrss.github.io/assets/56717167/e1a2ceda-30cc-4bca-8fb0-b2ccb63186db">

ì—¬ê¸°ì„œ í—ˆìš©ì„ í•´ì¤˜ë„ ë˜ê³  ì•„ë˜ì²˜ëŸ¼ ë³„ë„ë¡œ `íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ë²„ì „`ì„ ì„¤ì •í•´ì¤˜ë„ ëœë‹¤.

> íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ë²„ì „ ê²€ìƒ‰

<img width="1270" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-09-04 á„‹á…©á„Œá…¥á†« 11 57 59" src="https://github.com/nostrss/nostrss.github.io/assets/56717167/89563e54-fb93-452e-8cec-77e071afb374">

> íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ë²„ì „ ì„ íƒ

<img width="1295" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-09-04 á„‹á…©á„Œá…¥á†« 11 58 07" src="https://github.com/nostrss/nostrss.github.io/assets/56717167/fd654e17-37ef-4ca1-9de9-e5e047c0e008">

## í…ŒìŠ¤íŠ¸

### ê°œë°œëª¨ë“œ í…ŒìŠ¤íŠ¸ (yarn dev) : ì„±ê³µ

<img width="771" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-09-04 á„‹á…©á„’á…® 12 24 16" src="https://github.com/nostrss/nostrss.github.io/assets/56717167/9786c876-1c0b-40f1-8de0-1a5cf6bbd61b">

### ë¹Œë“œ í…ŒìŠ¤íŠ¸ (yarn build) : ì„±ê³µ

<img width="771" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-09-04 á„‹á…©á„’á…® 12 24 43" src="https://github.com/nostrss/nostrss.github.io/assets/56717167/9322c76c-239c-488d-b20d-741c9fe67a4a">

### ê³µë™ ì‘ì—…ì ì‹œì ì—ì„œ í…ŒìŠ¤íŠ¸

ë¨¼ì € ìƒì„±í•œ í”„ë¡œì íŠ¸ë¥¼ githubì— í‘¸ì‰¬í•´ ë‘ì—ˆë‹¤.

> [ğŸ”— yarnberry-next13 ë ˆíŒŒì§€í† ë¦¬ ë°”ë¡œê°€ê¸° ğŸ”—](https://github.com/nostrss/yarnberry-next13)

ì´ì œ ê³µë™ì‘ì—…ì ì…ì¥ì—ì„œ ì†ŒìŠ¤ì½”ë“œë¥¼ ë°›ì•„ì„œ ì‹¤í–‰í•´ë³´ì.

ìœ„ ë ˆíŒŒì§€í† ë¦¬ë¥¼ `git clone` ë°›ê³ , `yarn dev`ë¥¼ ì‹¤í–‰í•´ë´¤ë‹¤.

<img width="727" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-09-04 á„‹á…©á„’á…® 12 34 31" src="https://github.com/nostrss/yarnberry-next13/assets/56717167/89cbf714-6fce-46cc-9eca-419c7019fd29">

í„°ë¯¸ë„ì—ì„œ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ì´ ë˜ê³  local:3000ì—ì„œë„ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ì´ ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="nextjs"/>
        <category label="yarnberry"/>
        <category label="migration"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
    <entry>
        <title type="html"><![CDATA[[Nest] DTO, ê·¸ê²Œ ë­ì•¼? ì™œì“°ëŠ”ë°? ì–´ë–»ê²Œ ì“°ëŠ”ë°?]]></title>
        <id>2023-09-01-153-nestjs-dto</id>
        <link href="https://nostrss.me/2023-09-01-153-nestjs-dto"/>
        <updated>2023-09-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Nest.jsì—ì„œ DTOë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ì™€ ì‚¬ìš©ë²•]]></summary>
        <content type="html"><![CDATA[

## DTO(Data Transfer Object)ë€?

nest.jsë¥¼ ê³µë¶€í•˜ë©´ì„œ ìƒì†Œí•œ ìš©ì–´ë“¤ì´ ìˆì—ˆëŠ”ë°, ê·¸ì¤‘ í•˜ë‚˜ê°€ ë°”ë¡œ DTO(Data Transfer Object)ì˜€ë‹¤.

> ë°ì´í„° ì „ì†¡ ê°ì²´(data transfer object, DTO)ëŠ” í”„ë¡œì„¸ìŠ¤ ê°„ì— ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ëŠ” ê°ì²´ì´ë‹¤. í”„ë¡œì„¸ìŠ¤ ê°„ í†µì‹ ì´ ì¼ë°˜ì ìœ¼ë¡œ ì›ê²© ì¸í„°í˜ì´ìŠ¤(ì˜ˆ: ì›¹ ì„œë¹„ìŠ¤)ë¡œ ì¬ì •ë ¬í•˜ë©´ì„œ ì´ë£¨ì–´ì§€ê²Œ ë˜ëŠ”ë° ì—¬ê¸°ì—ì„œ ê° í˜¸ì¶œì˜ ë¹„ìš©ì´ ë§ë‹¤ëŠ” ì ì„ ë™ê¸°ë¡œ í•˜ì—¬ ì´ìš©í•˜ê²Œ ëœë‹¤. ê° í˜¸ì¶œì˜ ë¹„ìš©ì´ í° ê²ƒì´ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ê°„ ì™•ë³µ ì‹œê°„ê³¼ ê´€ë ¨ë˜ê¸° ë•Œë¬¸ì— í˜¸ì¶œì˜ ìˆ˜ë¥¼ ì¤„ì´ê¸° ìœ„í•´ ì—¬ëŸ¬ í˜¸ì¶œì— ì˜í•´ ì „ì†¡ë˜ëŠ” ë°ì´í„°ë¥¼ ì¶•ì í•˜ë©´ì„œ ì˜¤ì§ í•˜ë‚˜ì˜ í˜¸ì¶œë§Œìœ¼ë¡œ ì„œë¹„ìŠ¤ë˜ëŠ” ê°ì²´ì¸ DTOë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.

> [ğŸ”— ìœ„í‚¤í”¼ë””ì•„ ë°”ë¡œê°€ê¸° ğŸ”—](https://ko.wikipedia.org/wiki/%EB%8D%B0%EC%9D%B4%ED%84%B0_%EC%A0%84%EC%86%A1_%EA%B0%9D%EC%B2%B4)

ì¦‰, í´ë¼ì´ì–¸íŠ¸, ì„œë²„, ë°ì´í„°ë² ì´ìŠ¤ ê°„ì— í†µì‹ í•˜ê¸° ì „ì— `ìœ íš¨ì„±` ê²€ì‚¬ë¥¼ í•˜ê³ , `ë°ì´í„°`ë¥¼ ë³€í™˜í•˜ëŠ” ì—­í• ì„ í•˜ëŠ” ê²ƒ ê°™ë‹¤.

í”„ë¡ íŠ¸ ê°œë°œì ì…ì¥ì—ì„œ ì´í•´ë¥¼ í•´ë³´ë©´ `interface`ë¡œ `íƒ€ì…`ë§Œ ì§€ì •í•´ì£¼ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ìš”ì²­ì„ ë³´ë‚´ê±°ë‚˜ ë°›ì„ ë•Œ `interface`ë¡œ ì§€ì •ëœ íƒ€ì…ìœ¼ë¡œ `í˜•ë³€í™˜`ê¹Œì§€ í•´ì£¼ëŠ” ì—­í• ì„ í•œë‹¤ê³  ìƒê°í•˜ë©´ ë  ê²ƒ ê°™ë‹¤.

## DTOë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ 

> [ğŸ”— ê´€ë ¨ê¸€ ë°”ë¡œê°€ê¸° ğŸ”—](https://dev.to/bivor/why-dtos-are-a-must-have-in-nestjs-api-development-3j2j)

ìœ„ ë§í¬ì˜ ê¸€ì„ ì½ì–´ë³´ë‹ˆ DTOë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

> - DTOëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ê°„ì˜ ë¬¸ì œë¥¼ ëª…í™•í•˜ê²Œ ë¶„ë¦¬í•  ìˆ˜ ìˆë‹¤.
> - APIì˜ ë³µì¡ì„±ì„ ì¤„ì´ê³  ìœ ì§€ ê´€ë¦¬ë¥¼ ë” ì‰½ê²Œ ë§Œë“œëŠ” ë° ë„ì›€ì´ ë  ìˆ˜ ìˆë‹¤.

ë¦¬ì•¡íŠ¸ì—ì„œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒê³¼ ë¹„ìŠ·í•œ ì´ìœ ë¼ê³  ìƒê°í•˜ë©´ ë  ê²ƒ ê°™ë‹¤.

ì¢€ ë” ì•ˆì •ì ì´ê³ , í†µì‹ ê°„ì— íƒ€ì…ìœ¼ë¡œ ì¸í•œ ì˜¤ë¥˜ë¥¼ ì‚¬ì „ì— ë°©ì§€í•  ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆê¸° ë•Œë¬¸ì— ì‚¬ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤.

## DTO ì˜ˆì‹œ

```ts
import { ApiProperty } from '@nestjs/swagger';
import { IsNotEmpty, IsNumber } from 'class-validator';

export class CreateBoardDto {
  @IsNumber()
  @IsNotEmpty()
  @ApiProperty({
    description: 'ì‘ì„±ì ì•„ì´ë””',
    required: true,
    example: '1',
  })
  userId: number;

  @IsNotEmpty()
  @ApiProperty({
    description: 'ë‚´ìš©',
    required: true,
    example: 'ì•ˆë…•í•˜ì„¸ìš”',
  })
  content: string;
}
```

ìœ„ì˜ ì½”ë“œì—ì„œ `CreateBoardDto`ëŠ” `userId`ì™€ `content`ë¼ëŠ” ë‘ê°œì˜ ì†ì„±ì„ ê°€ì§€ê³  ìˆëŠ”ë°, ìœ„ ì½”ë“œë¥¼ React ì½”ë“œë¡œ í‘œí˜„í•˜ë©´ ì•„ë˜ì™€ ë¹„ìŠ·í•  ê²ƒ ê°™ë‹¤.

```ts
interface ICreateBoardDto {
  userId: number;
  content: string;
}

export default function CreateBoardDto(dto: ICreateBoardDto) {
  return {
    userId: Number(dto.userId),
    content: String(dto.content),
  };
}
```

ê·¸ë¦¬ê³  Service ì½”ë“œì—ì„œëŠ” ìœ„ì— ì§€ì •í•œ DTOì˜ í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ ì˜¬ìˆ˜ ìˆê²Œ ëœë‹¤.

```ts
async create(data: CreateBoardDto) {
    return this.boardRepository.save(data);
  }
```

## class-validatorì™€ class-transformer

ìœ„ì˜ ì—­í• ì„ í•˜ê¸° ìœ„í•´ì„œëŠ” ì¶”ê°€ì ì¸ npm íŒ¨í‚¤ì§€ê°€ í•„ìš”í•˜ë‹¤.

ì°¾ì•„ë³´ë‹ˆ ì•„ë˜ 2ê°œì˜ íŒ¨í‚¤ì§€ë¥¼ ë§ì´ ì‚¬ìš©í•˜ëŠ” ê²ƒ ê°™ë‹¤.

> [ğŸ”— npm class-validator ë°”ë¡œê°€ê¸° ğŸ”—](https://www.npmjs.com/package/class-validator)

> [ğŸ”— npm class-transformer ë°”ë¡œê°€ê¸° ğŸ”—](https://www.npmjs.com/package/class-transformer)

`class-validator`ëŠ” `DTO`ì˜ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í•´ì£¼ê³ , `class-transformer`ëŠ” `DTO`ì˜ í˜•ë³€í™˜ì„ í•´ì£¼ëŠ” ì—­í• ì„ í•œë‹¤.

ìœ„ì˜ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ê³ , `main.ts`ì— ì•„ë˜ì™€ ê°™ì´ ValidationPipeë¥¼ ì„¤ì •í•´ì£¼ë©´ DTOì—ì„œ ì§€ì •í•œ ìœ íš¨ì„± ê²€ì‚¬ì™€ í˜•ë³€í™˜ì„ ìë™ìœ¼ë¡œ í•´ì¤€ë‹¤.

```ts
import { ValidationPipe } from '@nestjs/common';
import { NestFactory } from '@nestjs/core';
import { AppModule } from './app.module';

async function bootstrap() {
  const port = 3000;
  const app = await NestFactory.create(AppModule);

  // ValidationPipe ì „ì—­ ì ìš©
  app.useGlobalPipes(
    new ValidationPipe({
      // class-transformer ì ìš©
      transform: true,
    })
  );

  await app.listen(port);
  console.info(`listening on port ${port}`);
}
bootstrap();
```
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="nestjs"/>
        <category label="dto"/>
        <category label="validator"/>
        <category label="transformer"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
    <entry>
        <title type="html"><![CDATA[[NEXT] Middlewareì™€ Edge Functions]]></title>
        <id>2023-08-31-152-nextjs-middleware-edge</id>
        <link href="https://nostrss.me/2023-08-31-152-nextjs-middleware-edge"/>
        <updated>2023-08-31T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Next.js Middlewareë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ë°œìƒí•œ ë¬¸ì œì ê³¼ í•´ê²°ë°©ë²•]]></summary>
        <content type="html"><![CDATA[

ì–¼ë§ˆ ì „ íŒ€í”„ë¡œì íŠ¸ì— `Next.js`ì˜ `Middleware` íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ github ë¡œê·¸ì¸ ê´€ë ¨ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ë ¤ê³  í–ˆì—ˆë‹¤.

> [ğŸ”— Next.js Middleware ê³µì‹ë¬¸ì„œ ğŸ”—](https://nextjs.org/docs/pages/building-your-application/routing/middleware)

ê¸°ëŠ¥ ì„¤ëª…

- ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­
- ê¹ƒí—™ì—ì„œ ë¦¬ë‹¤ì´ë ‰íŠ¸ urlë¡œ í˜ì´ì§€ë¥¼ ë‹¤ì‹œ ë³´ë‚´ì¤€ë‹¤.
- ë¦¬ë‹¤ì´ë ‰íŠ¸ url ì¿¼ë¦¬ìŠ¤íŠ¸ë§ ì¤‘ì—ì„œ codeê°’ì„ ë°›ì•„ì˜¨ë‹¤.
- ë°›ì•„ì˜¨ codeê°’ì„ ì´ìš©í•˜ì—¬ api í†µì‹ ì„ í•˜ì—¬ í† í° ê°’ì„ ë°›ì•„ì˜¨ë‹¤.
- í† í° ê°’ìœ¼ë¡œ ì¿ í‚¤ë¥¼ ìƒì„±í•œë‹¤.

## êµ¬í˜„ì½”ë“œ

`root` ìœ„ì¹˜ì— `middleware.ts` íŒŒì¼ì„ ìƒì„±í•˜ê³  ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•´ì£¼ì—ˆë‹¤.

```tsx
// middleware.ts
import { NextResponse } from 'next/server';
import type { NextRequest } from 'next/server';
import {
  BLOGRASS_API_BASE_URL,
  BLOGRASS_AUTH_GET_TOKEN,
} from './constants/api';
import { ACCESS_TOKEN, REFRESH_TOKEN } from './constants/common';

// This function can be marked `async` if using `await` inside
export async function middleware(request: NextRequest) {
  const url = new URL(request.url);
  const code = new URLSearchParams(url.search).get('code') || '';
  let accessToken = request.cookies.get(ACCESS_TOKEN)?.value;
  let refreshToken = request.cookies.get(REFRESH_TOKEN)?.value;

  const getAuthToken = async () => {
    const data = await fetch(
      `${BLOGRASS_API_BASE_URL}${BLOGRASS_AUTH_GET_TOKEN}${code}`
    );
    const jsonData = await data.json();
    return jsonData.result[0];
  };

  if (code && !accessToken && !refreshToken) {
    const data = await getAuthToken();
    accessToken = data.accessToken;
    refreshToken = data.refreshToken;
    const response = NextResponse.next();
    if (accessToken && refreshToken) {
      response.cookies.set(ACCESS_TOKEN, accessToken);
      response.cookies.set(REFRESH_TOKEN, refreshToken);
    }
    return response;
  }
}

export const config = {
  matcher: '/',
};
```

## ë¬¸ì œ ë°œìƒ

ê°œë°œëª¨ë“œì—ì„œëŠ” ìƒê´€ì—†ì—ˆëŠ”ë°, ë°°í¬ í›„ì— ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤.

`vercel`ì„ í”„ë¡ íŠ¸ ì„œë²„ë¡œ ì‚¬ìš©í•˜ê³  ìˆëŠ”ë°, ë°°í¬ í›„ì— `edge runtime` ì—ëŸ¬ê°€ ë°œìƒí•´ì„œ ë¡¤ë°±ì„ í•œ ì ì´ ìˆë‹¤.

ê·¸ë˜ì„œ `edge runtime`ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì•˜ë‹¤.

## Edge runtimeì´ë€?

`Next`ì—ì„œ ëŸ°íƒ€ì„ì€ 2ê°€ì§€ê°€ ì¡´ì¬í•œë‹¤.

- `Node.js Runtime`(ìš°ë¦¬ê°€ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ëŸ°íƒ€ì„)
- `Edge Runtime`

Next.jsì—ì„œ `Edge` ëŸ°íƒ€ì„ì€ ê²½ëŸ‰í™”ëœ `Node.js` `API`ì˜ *í•˜ìœ„ ì§‘í•©*ì´ë¼ `Node.js` `API`ì˜ ì¼ë¶€ ê¸°ëŠ¥ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

ì‚¬ìš©ê°€ëŠ¥í•œ `API`ëŠ” ì•„ë˜ ë§í¬ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

> [ğŸ”— edgeruntime api ë°”ë¡œê°€ê¸° ğŸ”—](https://nextjs.org/docs/pages/api-reference/edge)

ë§í¬ì—ì„œ ë³´ë“¯ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” APIê°€ í•œì •ë˜ì–´ ìˆìœ¼ë©° _npm íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤_.

> ê·¸ë˜ì„œ `edge runtime`ì—ì„œëŠ” `axios`ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ì—ˆë‹¤.

ë˜í•œ vercelì—ì„œë„ ì‚¬ìš©í•  ë•Œ ì—¬ëŸ¬ê°€ì§€ ì œì•½ì´ ìˆë‹¤.

> [ğŸ”— vercel edge function ì œí•œ ë°”ë¡œê°€ê¸° ğŸ”—](https://vercel.com/docs/functions/edge-functions/limitations)

ê·¸ë˜ì„œ ê°œë°œëª¨ë“œì—ì„œëŠ” ì‘ë™ì„ í–ˆìœ¼ë‚˜ vercelì— ë°°í¬ í›„ì—ëŠ” ì—ëŸ¬ê°€ ë°œìƒí•œ ê²ƒìœ¼ë¡œ ì¶”ì¸¡ì´ ëœë‹¤.

## ê²°ë¡ 

> - next.js middlewareëŠ” edge runtimeì—ì„œ ì‘ë™í•œë‹¤.
> - edge runtimeì€ ê²½ëŸ‰í™”ëœ node.js APIì˜ í•˜ìœ„ ì§‘í•©ì´ë‹¤.
> - edge runtimeì—ì„œëŠ” npm íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.
> - ê·¸ë¦¬ê³  vercelì—ì„œë„ ì‚¬ìš©í•  ë•Œ ì—¬ëŸ¬ê°€ì§€ ì œì•½ì´ ìˆë‹¤.
> - middlewareì—ì„œëŠ” ê°„ë‹¨í•œ ë¡œì§ë§Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="nestjs"/>
        <category label="edge"/>
        <category label="vercel"/>
        <category label="runtime"/>
        <category label="middleware"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
    <entry>
        <title type="html"><![CDATA['[Nest] ERROR [ExceptionsHandler] No metadata']]></title>
        <id>2023-08-30-151-error-nest-no-metadata</id>
        <link href="https://nostrss.me/2023-08-30-151-error-nest-no-metadata"/>
        <updated>2023-08-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA['[Nest] ERROR [ExceptionsHandler] No metadata']]></summary>
        <content type="html"><![CDATA[

`Nest.js`ì—ì„œ `typeorm`ì„ ì—°ê²°í•˜ì—¬ ì‚¬ìš©í•˜ë ¤ê³  í•˜ë˜ ì¤‘ ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤.

```bash
[Nest] 87109  - 2023. 08. 29. ì˜¤í›„ 9:41:15   ERROR [ExceptionsHandler] No metadata for "Board" was found.
EntityMetadataNotFoundError: No metadata for "Board" was found.
    at DataSource.getMetadata (/Users/jintaekwoo/github/private/fastcampus/simple-board/src/data-source/DataSource.ts:444:30)
    at Repository.get metadata [as metadata] (/Users/jintaekwoo/github/private/fastcampus/simple-board/src/repository/Repository.ts:53:40)
    at Repository.find (/Users/jintaekwoo/github/private/fastcampus/simple-board/src/repository/Repository.ts:524:39)
    at BoardService.findAll (/Users/jintaekwoo/github/private/fastcampus/simple-board/src/board/board.service.ts:35:33)
    at BoardController.findAll (/Users/jintaekwoo/github/private/fastcampus/simple-board/src/board/board.controller.ts:24:30)
    at /Users/jintaekwoo/github/private/fastcampus/simple-board/node_modules/@nestjs/core/router/router-execution-context.js:38:29
    at InterceptorsConsumer.intercept (/Users/jintaekwoo/github/private/fastcampus/simple-board/node_modules/@nestjs/core/interceptors/interceptors-consumer.js:11:20)
    at /Users/jintaekwoo/github/private/fastcampus/simple-board/node_modules/@nestjs/core/router/router-execution-context.js:46:60
    at /Users/jintaekwoo/github/private/fastcampus/simple-board/node_modules/@nestjs/core/router/router-proxy.js:9:23
    at Layer.handle [as handle_request] (/Users/jintaekwoo/github/private/fastcampus/simple-board/node_modules/express/lib/router/layer.js:95:5)
```

## í•´ê²°ì„ ìœ„í•œ ì‹œë„

### @Entity() ëˆ„ë½

- `entitiy` íŒŒì¼ì— `@Entity()` ë°ì½”ë ˆì´í„°ê°€ ëˆ„ë½ì—¬ë¶€ í™•ì¸
- `Module`ì— í•´ë‹¹ `Entity`ê°€ ë“±ë¡ë˜ì–´ìˆëŠ”ì§€ í™•ì¸
- `typeorm` ë²„ì „ ë‚®ì¶”ê¸°(0.3.17 => 0.2.X)
  - ë²„ì „ì„ ë‚®ì¶”ì§€ ì•Šê³  ìˆ˜ì •í•´ë³´ê¸° ìœ„í•´ ë³€ê²½í•˜ì§€ ì•Šì•˜ë‹¤.
- typeorm `DataSource`ì˜ entities ê²½ë¡œê°€ ì˜ëª»ë˜ì—ˆëŠ”ì§€ í™•ì¸

### í•´ê²°(app.module.ts ìˆ˜ì •)

```ts
// app.module.ts
// ë³€ê²½ì „

@Module({
  imports: [
    ConfigModule(),
    TypeOrmModule.forRoot({
      type: 'postgres',
      host: 'localhost',
      port: 5432,
      username: 'admin',
      password: '**********',
      database: 'postgres',
      entities: [__dirname + '/**/*.entity.{.ts,.js}'],
      synchronize: false,
    }),
    BoardModule,
  ],
    controllers: [AppController],
  providers: [AppService],
})

// ë³€ê²½í›„
@Module({
  imports: [
    ConfigModule(),
    TypeOrmModule.forRoot({
      type: 'postgres',
      host: process.env.DB_HOST,
      port: parseInt(process.env.DB_PORT),
      username: process.env.DB_USERNAME,
      password: process.env.DB_PASSWORD,
      database: process.env.DB_NAME,
      entities: [__dirname + '/**/*.entity{.ts,.js}'],
      synchronize: false,
      logging: true,
    }),
    BoardModule,
  ],
  controllers: [AppController],
  providers: [AppService],
})

```

ìœ„ì™€ ê°™ì´ í™˜ê²½ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •í•˜ë‹ˆ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ì˜€ë‹¤.

## í•´ê²° ëì§€ë§Œ ì—¬ì „í•œ ê¶ê¸ˆì¦

> í™˜ê²½ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒê³¼ í•˜ë“œì½”ë”©í•˜ëŠ” ê²ƒì˜ ì°¨ì´ëŠ” ë¬´ì—‡ì¼ê¹Œ
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="nestjs"/>
        <category label="typeorm"/>
        <category label="express"/>
        <category label="error"/>
        <category label="repository"/>
        <category label="datasource"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
    <entry>
        <title type="html"><![CDATA['[NEXT] TOAST Editorì—ì„œ ì‘ì„±í•œ ê¸€ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°(useRef) ']]></title>
        <id>2023-08-25-147-toast-next-2</id>
        <link href="https://nostrss.me/2023-08-25-147-toast-next-2"/>
        <updated>2023-08-25T00:00:00.000Z</updated>
        <content type="html"><![CDATA[

> - [1.TOAST Editorì— ì‚¬ìš©í•˜ê¸°](https://nostrss.github.io/2023-08-25/146-toast-next-1)
> - [2.TOAST Editorì— ì‘ì„±í•œ ê¸€ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°(useRef)](https://nostrss.github.io/2023-08-25/147-toast-next-2)
> - [3.TOAST Editorì—ì„œ ì´ë¯¸ì§€ ì—…ë¡œë“œí•˜ê¸°(hooks)](https://nostrss.github.io/2023-08-25/148-toast-next-3)
> - [4.TOAST Editor Viewer ì‚¬ìš©í•˜ê¸°](https://nostrss.github.io/2023-08-25/149-toast-next-4)
> - [5.TOAST Editor customHTMLSanitizer ì‚¬ìš©í•˜ê¸°](https://nostrss.github.io/2023-08-25/150-toast-next-5)

## Toast Editorì— ì‘ì„±í•œ ê¸€ ë‚´ìš©ì„ ë¶ˆëŸ¬ì˜¤ê¸°

```
src
 â”£ components
 â”ƒ â”£ newpost
 â”ƒ â”ƒ â”— PostEditor.tsx // ì—ë””í„° ì»´í¬ë„ŒíŠ¸
 â”£ pages
 â”ƒ â”£ newpost
 â”ƒ â”ƒ â”— index.tsx // ì—ë””í„°ì˜ ë‚´ìš©ì„ api ìš”ì²­ìœ¼ë¡œ ì„œë²„ì— ì „ì†¡
 â”ƒ â”— index.tsx
```

ì—ë””í„°ì— ê¸€ì„ ì‘ì„±í•˜ê³ , ì„œë²„ì— ì €ì¥í•˜ê¸° ìœ„í•´ì„œëŠ” ë¨¼ì € ì—ë””í„°ì— ì‘ì„±ëœ ê¸€ ë‚´ìš©ì„ ë¶ˆëŸ¬ì™€ì•¼ í•œë‹¤.

```tsx
// src/pages/newpost/index.tsx
const editorRef = useRef<Editor>(null);

const onSubmitNewPost = (e: FormEvent) => {
  e.preventDefault();
  // ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ì‘ì„±í•œ ê¸€ ë‚´ìš©ì„ ë¶ˆëŸ¬ì˜¨ë‹¤.
  const markDownContent = editorRef.current?.getInstance().getMarkdown();
  console.log(markDownContent);
};

return (
  <section>
    <form onSubmit={onSubmitNewPost}>
      <PostEditor editorRef={editorRef} />
    </form>
  </section>
);
```

`useRef`ë¥¼ ì‚¬ìš©í•˜ì—¬ `editorRef`ë¥¼ ì„ ì–¸í•˜ì˜€ê³ , `editorRef`ë¥¼ `PostEditor`ì— `Props`ë¡œ ì „ë‹¬í•˜ê²Œ ë˜ë©´ ìœ ì €ê°€ ì‘ì„±í•œ ê¸€ì •ë³´ê°€ `editorRef`ì— ë‹´ê¸°ê²Œ ë  ê²ƒì´ë‹¤.

> `useState`ê°€ ì•„ë‹Œ `useRef`ë¥¼ ì‚¬ìš©í•œ ì´ìœ ëŠ”, `useState`ë¥¼ ì‚¬ìš©í•˜ë©´ `onChange` ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œë§ˆë‹¤ ë Œë”ë§ì´ ì¼ì–´ë‚˜ê¸° ë•Œë¬¸ì—, ê¸€ìë¥¼ ì…ë ¥í•˜ëŠ” ë™ì•ˆì—ë„ ë Œë”ë§ì´ ì¼ì–´ë‚˜ê²Œ ë  ê²ƒì´ë‹¤. ì´ë¥¼ ë°©ì§€í•˜ê³ ì `useRef`ë¥¼ ì‚¬ìš©í•˜ì˜€ë‹¤.

`editorRef`ì—ì„œ ì‘ì„±ëœ ê¸€ ë‚´ìš©ì„ ë½‘ì•„ë‚´ê¸° ìœ„í•´ì„œëŠ” `getInstance()`ë¥¼ ì‚¬ìš©í•˜ì˜€ë‹¤.

ì—¬ê¸°ì„œ `Toast Editor`ëŠ” 2ê°€ì§€ ëª¨ë“œë¥¼ ì œê³µí•˜ëŠ”ë°, `markdown`ê³¼ `wysiwyg`ì´ë‹¤.

- `markdown` : README.md íŒŒì¼ì²˜ëŸ¼ ì‘ì„±í•˜ëŠ” ì—ë””í„°ì´ë‹¤. ì´ëŸ° í˜•ì‹ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¤ê¸° ìœ„í•´ì„œëŠ” getMarkdown()ì„ ì‚¬ìš©í•˜ë©´ëœë‹¤.
- `wysiwyg` : ì¼ë°˜ì ì¸ ê¸€ì“°ê¸° í¸ì§‘ê¸° í˜•ì‹ì˜ ì—ë””í„°ì´ë‹¤. ì´ëŸ° í˜•ì‹ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¤ê¸° ìœ„í•´ì„œëŠ” getHtml()ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

ë‚˜ëŠ” ë§ˆí¬ë‹¤ìš´ í˜•ì‹ë§Œ ì‚¬ìš©í•  ê²ƒì´ê¸° ë•Œë¬¸ì— `getMarkdown()`ì„ ì‚¬ìš©í•˜ì˜€ë‹¤.

ì´ì œëŠ” `Props`ë¥¼ ë°›ëŠ” `PostEditor` ì»´í¬ë„ŒíŠ¸ë¥¼ ìˆ˜ì •í•´ì•¼ê² ë‹¤.

```tsx
//src/components/newpost/PostEditor.tsx
import { Editor } from '@toast-ui/react-editor';
import '@toast-ui/editor/dist/toastui-editor.css';
import '@toast-ui/editor/dist/i18n/ko-kr';
import { RefObject } from 'react';

export default function PostEditor({
  editorRef,
}: {
  editorRef: RefObject<Editor>;
}) {
  return (
    <Editor
      ref={editorRef}
      previewStyle='vertical'
      height='800px'
      initialEditType='markdown'
      placeholder='Write Something'
      hideModeSwitch={true}
      language='ko-KR'
    />
  );
}
```

`Props`ë¡œ ì „ë‹¬ë°›ì€ `editorRef`ë¥¼ `Editor` ì»´í¬ë„ŒíŠ¸ì˜ `ref`ë¡œ ì „ë‹¬í•´ì£¼ì—ˆë‹¤.

ì´ì œ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ì.

<img width="1273" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-08-26 á„‹á…©á„Œá…¥á†« 11 22 41" src="https://github.com/nostrss/nostrss.github.io/assets/56717167/ff50c414-eaf8-4a00-b67f-d6088b870c04">

ì½˜ì†”ì— ì •ìƒì ìœ¼ë¡œ ê¸€ ë‚´ìš©ì´ ì¶œë ¥ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="nextjs"/>
        <category label="react"/>
        <category label="javascript"/>
        <category label="typescript"/>
        <category label="toast"/>
        <category label="editor"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
    <entry>
        <title type="html"><![CDATA['[NEXT] TOAST Editorì—ì„œ ì´ë¯¸ì§€ ì—…ë¡œë“œí•˜ê¸°(hooks)']]></title>
        <id>2023-08-25-148-toast-next-3</id>
        <link href="https://nostrss.me/2023-08-25-148-toast-next-3"/>
        <updated>2023-08-25T00:00:00.000Z</updated>
        <content type="html"><![CDATA[

> - [1.TOAST Editorì— ì‚¬ìš©í•˜ê¸°](https://nostrss.github.io/2023-08-25/146-toast-next-1)
> - [2.TOAST Editorì— ì‘ì„±í•œ ê¸€ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°(useRef)](https://nostrss.github.io/2023-08-25/147-toast-next-2)
> - [3.TOAST Editorì—ì„œ ì´ë¯¸ì§€ ì—…ë¡œë“œí•˜ê¸°(hooks)](https://nostrss.github.io/2023-08-25/148-toast-next-3)
> - [4.TOAST Editor Viewer ì‚¬ìš©í•˜ê¸°](https://nostrss.github.io/2023-08-25/149-toast-next-4)
> - [5.TOAST Editor customHTMLSanitizer ì‚¬ìš©í•˜ê¸°](https://nostrss.github.io/2023-08-25/150-toast-next-5)

## Toast Editorì—ì„œ ì´ë¯¸ì§€ ì—…ë¡œë“œ í•˜ê¸°

`Toast Editor`ëŠ” ì´ë¯¸ì§€ ì—…ë¡œë“œë¥¼ ìœ„í•œ UIë¥¼ ì•„ë˜ì™€ ê°™ì´ ì œê³µí•˜ê³  ìˆë‹¤.

<img width="1091" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-08-26 á„‹á…©á„Œá…¥á†« 11 35 09" src="https://github.com/nostrss/nostrss.github.io/assets/56717167/bc66b175-a33f-4a8c-bff4-344824869395">

ê·¸ë¦¬ê³  ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ê³  OK ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì´ë¯¸ì§€ê°€ ì•„ë˜ì™€ ê°™ì´ ë…¸ì¶œë˜ê²Œ ëœë‹¤.

<img width="1091" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-08-26 á„‹á…©á„Œá…¥á†« 11 34 58" src="https://github.com/nostrss/nostrss.github.io/assets/56717167/9b394896-a3ca-4efc-a933-74dbe0700f57">

ì¢Œì¸¡ì— ë…¸ì¶œëœ ë³µì¡í•œ ì½”ë“œëŠ” base64ë¡œ ì¸ì½”ë”©ëœ ì´ë¯¸ì§€ ì½”ë“œì¸ë°,ìœ ì €ê°€ ì´ë ‡ê²Œ ì‹¤ì‚¬ìš©í•˜ê¸°ëŠ” ì–´ë ¤ìš¸ ê²ƒ ê°™ë‹¤.

ê·¸ë˜ì„œ ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •ì„ í•´ë³´ë ¤ê³  í•œë‹¤.

> 1.  ì—…ë¡œë“œí•  ì´ë¯¸ì§€ë¥¼ ì„ íƒí•œë‹¤.
> 2.  OKë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì„ íƒí•œ ì´ë¯¸ì§€ë¥¼ ì„œë²„ì— ì—…ë¡œë“œí•œë‹¤.
> 3.  ì—…ë¡œë“œê°€ ì™„ë£Œë˜ë©´, ì—…ë¡œë“œëœ ì´ë¯¸ì§€ì˜ ì£¼ì†Œë¥¼ ë°›ëŠ”ë‹¤.
> 4.  ì—…ë¡œë“œ ëœ ì´ë¯¸ì§€ì˜ ì£¼ì†Œë¥¼ ì—ë””í„°ì— ë…¸ì¶œí•œë‹¤.

1ë²ˆì€ ì´ë¯¸ êµ¬í˜„ë˜ì–´ ìˆë‹¤. 2ë²ˆë¶€í„° ì§ì ‘ êµ¬í˜„í•´ë³´ë„ë¡ í•˜ì.

## OKë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì´ë¯¸ì§€ ì—…ë¡œë“œ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ê¸°

ê·¸ëŸ°ë° OK ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ë‚´ê°€ ì‘ì„±í•œ ì´ë¯¸ì§€ ì—…ë¡œë“œ í•¨ìˆ˜ê°€ ë°”ë¡œ ì‹¤í–‰ë˜ë„ë¡ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ?

ì´ì „ì— `EditorOptions`ì˜ ë¬¸ì„œì—ì„œ `hooks`ë¼ëŠ” `Props`ë¥¼ ë³¸ì ì´ ìˆì—ˆë‹¤.

> [ğŸ”— EditorOptions ë¬¸ì„œ ë°”ë¡œê°€ê¸° ğŸ”—](https://nhn.github.io/tui.editor/latest/ToastUIEditorCore)

<img width="965" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-08-26 á„‹á…©á„Œá…¥á†« 11 53 49" src="https://github.com/nostrss/nostrss.github.io/assets/56717167/1c29dcf3-73ca-48e5-a615-1b6b45336392">

ì„¤ëª…ì— ì´ë¯¸ì§€ ì—…ë¡œë“œë¥¼ ìœ„í•œ `hooks`ë¼ê³  ë‹¹ë‹¹íˆ ê¸°ì¬ë˜ì–´ ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ì—­ì‹œ ë¬¸ì„œëŠ” ì˜ ì¨ë†“ì€ ê²ƒ ê°™ë‹¤.

`hooks`ë¥¼ ì‚¬ìš©í•˜ë©´ ë˜ì§€ ì•Šì„ê¹Œ ì˜ˆìƒì€ ë˜ëŠ”ë° ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€ ì–´ë–»ê²Œ ë ê¹Œ?

ì¡°ê¸ˆ ë” ì•Œì•„ë´ì•¼ê² ë‹¤.

```ts
// node_modules/@toast-ui/editor/types/editor.d.ts
export interface EditorOptions {
 (...)
  hooks?: HookMap;
  (...)
}

export type HookMap = {
  addImageBlobHook?: (blob: Blob | File, callback: HookCallback) => void;
};

type HookCallback = (url: string, text?: string) => void;
```

`hooks`ì— ëŒ€í•œ íƒ€ì…ì„ í™•ì¸í•´ë³´ë‹ˆ, `addImageBlobHook`ì´ë¼ëŠ” í•¨ìˆ˜ê°€ ìˆê³ , ì´ í•¨ìˆ˜ëŠ” `blob`ê³¼ `callback`ì„ ì¸ìë¡œ ë°›ëŠ”ë‹¤.

ê·¸ë¦¬ê³  `callback`ì€ `url`ê³¼ `text`ë¥¼ ì¸ìë¡œ ë°›ëŠ”ë‹¤.

ì´ì œ `blob`ê³¼ `callback`ì„ ì¸ìë¡œ ë°›ëŠ” ì´ë¯¸ì§€ ì—…ë¡œë“œ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì„œ ì—°ê²° í•´ì£¼ë©´ ë  ê²ƒ ê°™ë‹¤.

### ì´ë¯¸ì§€ ì—…ë¡œë“œ í•¨ìˆ˜

```ts
export const imageAPI = {
  postUploadImage: async (image: File | Blob, callback: HookCallback) => {
    // ì´ë¯¸ì§€ ì—…ë¡œë“œë¥¼ ìœ„í•œ formData ìƒì„±
    const formData = new FormData();
    formData.append('file', image);

    try {
      // ì´ë¯¸ì§€ ì—…ë¡œë“œ í›„ ì´ë¯¸ì§€ id ë°›ê¸°
      const result = await axios({
        method: 'post',
        url: BLOGRASS_IMAGE_UPLOAD,
        data: formData,
      });

      // ì´ë¯¸ì§€ idë¥¼ ì´ìš©í•˜ì—¬ ì´ë¯¸ì§€ url ìƒì„±
      const imageUrl =
        await `${BLOGRASS_IMAGE_BUCKET_URL}/${result.data.result[0]}`;

      // callbackì— ì´ë¯¸ì§€ urlê³¼ alt_textë¥¼ ì¸ìë¡œ ë„£ì–´ì¤€ë‹¤.
      callback(imageUrl, 'alt_text');
    } catch (error) {
      console.error(error);
    }
  },
};
```

> 1. `image`ì™€ `callback`ì„ ì¸ìë¡œ ë°›ëŠ”ë‹¤.
> 2. `image`ë¥¼ ì„œë²„ì— ì—…ë¡œë“œ í•œë‹¤.
> 3. ì—…ë¡œë“œê°€ ì™„ë£Œë˜ë©´, ì—…ë¡œë“œëœ ì´ë¯¸ì§€ì˜ `URL`ì„ ë°›ëŠ”ë‹¤.
> 4. `callback`ì— ì´ë¯¸ì§€ì˜ `URL`ê³¼ í…ìŠ¤íŠ¸ë¥¼ ì¸ìë¡œ ë„£ì–´ì¤€ë‹¤.

### hooksì— ì´ë¯¸ì§€ ì—…ë¡œë“œ í•¨ìˆ˜ ì—°ê²°í•˜ê¸°

ì•„ë˜ì™€ ê°™ì´ `hooks`ì— ì´ë¯¸ì§€ ì—…ë¡œë“œ í•¨ìˆ˜ë¥¼ ì—°ê²°í•´ì£¼ë©´ ëœë‹¤.

```tsx
export default function PostEditor({
  editorRef,
}: {
  editorRef: RefObject<Editor>;
}) {
  return (
    <Editor
      ref={editorRef}
      previewStyle='vertical'
      height='800px'
      initialEditType='markdown'
      placeholder='Write Something'
      hideModeSwitch={true}
      language='ko-KR'
      hooks={{ addImageBlobHook: imageAPI.postUploadImage }}
    />
  );
}
```

<img width="467" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-08-26 á„‹á…©á„’á…® 6 38 19" src="https://github.com/nostrss/nostrss.github.io/assets/56717167/957adff0-3396-47ea-a87f-6964687ab0e3">

ì½”ë“œ ë¸”ëŸ­ì— `hooks`ë¥¼ ì¶”ê°€í•´ì£¼ì—ˆë‹¤.(ì™œ ì•ˆë³´ì´ì§€..?)

> í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ë‹ˆ ì•„ë˜ì™€ ê°™ì´ ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œ ë˜ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆì—ˆë‹¤.

<img width="1258" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-08-26 á„‹á…©á„’á…® 12 13 27" src="https://github.com/nostrss/nostrss.github.io/assets/56717167/12e593d1-5e4c-47d1-b5a9-c5680eeff5cd">
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="nextjs"/>
        <category label="react"/>
        <category label="javascript"/>
        <category label="typescript"/>
        <category label="toast"/>
        <category label="editor"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
    <entry>
        <title type="html"><![CDATA['[NEXT] TOAST Editor ì‚¬ìš©í•˜ê¸° ']]></title>
        <id>2023-08-25-146-toast-next-1</id>
        <link href="https://nostrss.me/2023-08-25-146-toast-next-1"/>
        <updated>2023-08-25T00:00:00.000Z</updated>
        <content type="html"><![CDATA[

> - [1.TOAST Editorì— ì‚¬ìš©í•˜ê¸°](https://nostrss.github.io/2023-08-25/146-toast-next-1)
> - [2.TOAST Editorì— ì‘ì„±í•œ ê¸€ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°(useRef)](https://nostrss.github.io/2023-08-25/147-toast-next-2)
> - [3.TOAST Editorì—ì„œ ì´ë¯¸ì§€ ì—…ë¡œë“œí•˜ê¸°(hooks)](https://nostrss.github.io/2023-08-25/148-toast-next-3)
> - [4.TOAST Editor Viewer ì‚¬ìš©í•˜ê¸°](https://nostrss.github.io/2023-08-25/149-toast-next-4)
> - [5.TOAST Editor customHTMLSanitizer ì‚¬ìš©í•˜ê¸°](https://nostrss.github.io/2023-08-25/150-toast-next-5)

## ë²„ì „ ì •ë¦¬

- `Next.js` : 13.4.10
  - `pages Router`ë¥¼ ì‚¬ìš©í•˜ì˜€ë‹¤.
- `@toast-ui/editor` - 3.2.2
- `@toast-ui/react-editor` - 3.2.3

## ëŒ€ëµì ì¸ í´ë” êµ¬ì¡°

```
src
 â”£ components
 â”ƒ â”£ newpost
 â”ƒ â”ƒ â”— PostEditor.tsx
 â”£ pages
 â”ƒ â”£ newpost
 â”ƒ â”ƒ â”— index.tsx
 â”ƒ â”— index.tsx
```

## ì‚¬ìš©ë²• ìµíˆê¸°

> [ğŸ”— Toast Editor ì†Œê°œ ë°”ë¡œê°€ê¸° ğŸ”—](https://ui.toast.com/tui-editor)

`Toast Editor`ëŠ” `NHN`ì´ ë§Œë“  ì˜¤í”ˆì†ŒìŠ¤ ì—ë””í„°ì´ë‹¤.

ê·¸ë˜ì„œ í•œêµ­ì—ì„œ ë§ì´ ì‚¬ìš©í•˜ê³ , ê²€ìƒ‰ ì‹œì—ë„ í•œêµ­ì–´ ê²°ê³¼ê°€ ë§ì´ ë‚˜ì˜¤ëŠ” í¸ì´ì—ˆë‹¤.

ë‚˜ëŠ” Next.jsë¥¼ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì— React ë²„ì „ì˜ ì‚¬ìš©ë²•ì„ ì°¾ì•„ë³´ì•˜ë‹¤.

> [ğŸ”— @toast-ui/react-editor ê¹ƒí—ˆë¸Œ ë°”ë¡œê°€ê¸° ğŸ”—](https://github.com/nhn/tui.editor/tree/master/apps/react-editor#-usage)

ìœ„ì˜ ë§í¬ì—ì„œ ì†Œê°œí•œ ì‚¬ìš©ë²•ì€ ì•„ë˜ì™€ ê°™ì•˜ë‹¤.

```tsx
import '@toast-ui/editor/dist/toastui-editor.css';

import { Editor } from '@toast-ui/react-editor';

const MyComponent = () => (
  <Editor
    initialValue='hello react editor world!'
    previewStyle='vertical'
    height='600px'
    initialEditType='markdown'
    useCommandShortcut={true}
  />
);
```

ìœ„ì™€ ê°™ì´ `Editor`ë¥¼ `import`í•˜ê³  ì»´í¬ë„ŒíŠ¸ì— í•„ìš”í•œ propsë¥¼ ì „ë‹¬í•´ ì£¼ë©´ ëœë‹¤.

ê·¸ë ‡ë‹¤ë©´ `Editor`ì»´í¬ë„ŒíŠ¸ëŠ” ì–´ë–¤ `props`ë¥¼ ê°€ì§€ê³  ìˆì„ê¹Œ?

## Editor ì»´í¬ë„ŒíŠ¸ ì‚´í´ë³´ê¸°

```ts
// node_modules/@toast-ui/react-editor/index.d.ts
export class Editor extends Component<EditorProps> {
  getInstance(): ToastuiEditor;

  getRootElement(): HTMLElement;
}
```

`Editor` ì»´í¬ë„ŒíŠ¸ëŠ” `Component<EditorProps>`íƒ€ì…ì„ ìƒì†ë°›ê³  `getInstance`ì™€ `getRootElement`ë¼ëŠ” ë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆì—ˆë‹¤.

`props`ë¥¼ ì•Œì•„ë³´ê¸° ìœ„í•´ì„œ ì´ë²ˆì—” ìƒì†ë°›ì€ `EditorProps`ë¥¼ ì‚´í´ë³´ì•˜ë‹¤.

```ts
// node_modules/@toast-ui/react-editor/index.d.ts
export type EditorProps = Omit<EditorOptions, 'el'> & Partial<EventMapping>;
```

1. `Omit<EditorOptions, 'el'>`ëŠ” `EditorOptions`ì—ì„œ `el`ì„ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ì†ì„±ë“¤ì„ ìƒì†ë°›ëŠ”ë‹¤ëŠ” ëœ»ì´ë‹¤.

2. `Partial<EventMapping>`ëŠ” `EventMapping`ì˜ ì†ì„±ë“¤ì„ ì„ íƒì ìœ¼ë¡œ ìƒì†ë°›ëŠ”ë‹¤ëŠ” ëœ»ì´ë‹¤.

3. ê·¸ë¦¬ê³  ìœ„ì˜ ë‘ íƒ€ì…ì„ í•©ì³ì„œ `EditorProps`ë¥¼ ë§Œë“¤ì—ˆë‹¤.

ì´ì¤‘ì— `EditorOptions`ë¥¼ ë¨¼ì € ì‚´í´ë³´ì•˜ë‹¤.

### EditorOptions

```ts
// node_modules/@toast-ui/editor/types/editor.d.ts
export interface EditorOptions {
  el: HTMLElement; // ì´ê±´ ì œì™¸í•˜ê³  ìƒì†ì„ ë°›ëŠ”ë‹¤.
  height?: string;
  minHeight?: string;
  initialValue?: string;
  previewStyle?: PreviewStyle;
  initialEditType?: EditorType;
  events?: EventMap;
  hooks?: HookMap;
  language?: string;
  useCommandShortcut?: boolean;
  usageStatistics?: boolean;
  toolbarItems?: (string | ToolbarItemOptions)[][];
  hideModeSwitch?: boolean;
  plugins?: EditorPlugin[];
  extendedAutolinks?: ExtendedAutolinks;
  placeholder?: string;
  linkAttributes?: LinkAttributes;
  customHTMLRenderer?: CustomHTMLRenderer;
  customMarkdownRenderer?: ToMdConvertorMap;
  referenceDefinition?: boolean;
  customHTMLSanitizer?: Sanitizer;
  previewHighlight?: boolean;
  frontMatter?: boolean;
  widgetRules?: WidgetRule[];
  theme?: string;
  autofocus?: boolean;
  viewer?: boolean;
}
```

ì—„ì²­ë‚˜ê²Œ ë§ì€ ì˜µì…˜ë“¤ì´ ìˆë‹¤.

í•˜ì§€ë§Œ ë‹¤í–‰íˆ ë¬¸ì„œë¡œ ì˜ ì •ë¦¬ê°€ ë˜ì–´ ìˆì–´ì„œ ê° ì˜µì…˜ë“¤ì´ ì–´ë–¤ ì—­í• ì„ í•˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.

> [ğŸ”— EditorOptions ë¬¸ì„œ ë°”ë¡œê°€ê¸° ğŸ”—](https://nhn.github.io/tui.editor/latest/ToastUIEditorCore)

ìœ„ì˜ ë§í¬ë¥¼ ë³´ë©´ì„œ ë‚˜ì—ê²Œ í•„ìš”í•œ ì˜µì…˜ë“¤ì´ ë¬´ì—‡ì¸ì§€ ì•Œ ìˆ˜ ìˆì—ˆë‹¤.

### EventMapping

```ts
// node_modules/@toast-ui/react-editor/index.d.ts
export interface EventMapping {
  onLoad: EventMap['load'];
  onChange: EventMap['change'];
  onCaretChange: EventMap['caretChange'];
  onFocus: EventMap['focus'];
  onBlur: EventMap['blur'];
  onKeydown: EventMap['keydown'];
  onKeyup: EventMap['keyup'];
  onBeforePreviewRender: EventMap['beforePreviewRender'];
  onBeforeConvertWysiwygToMarkdown: EventMap['beforeConvertWysiwygToMarkdown'];
}

export interface EventMap {
  load?: (param: Editor) => void;
  change?: (editorType: EditorType) => void;
  caretChange?: (editorType: EditorType) => void;
  focus?: (editorType: EditorType) => void;
  blur?: (editorType: EditorType) => void;
  keydown?: (editorType: EditorType, ev: KeyboardEvent) => void;
  keyup?: (editorType: EditorType, ev: KeyboardEvent) => void;
  beforePreviewRender?: (html: string) => string;
  beforeConvertWysiwygToMarkdown?: (markdownText: string) => string;
}
```

`EventMapping`ì´ë¼ëŠ” ë‹¨ì–´ ê·¸ëŒ€ë¡œ ì‚¬ìš© ê°€ëŠ¥í•œ ì´ë²¤íŠ¸ í•¨ìˆ˜ì™€ ì´ë²¤íŠ¸ í•¨ìˆ˜ì˜ íŒŒë¼ë¯¸í„° íƒ€ì…ì„ ì •ì˜í•˜ê³  ë§µí•‘í•œ ê²ƒ ì´ì—ˆë‹¤.

## ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°

ê¸€ì‘ì„± í˜ì´ì§€ëŠ” `pages/newpost/index.tsx` ê²½ë¡œì— ë§Œë“¤ë ¤ê³  í•œë‹¤.

í•˜ì§€ë§Œ `index.tsx` íŒŒì¼ì´ ë„ˆë¬´ ì»¤ì§ˆê²ƒ ê°™ì•„ `components/newpost/PostEditor.tsx`íŒŒì¼ì— `PostEditor`ë¼ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë³„ë„ë¡œ ë§Œë“¤ê³ , `index.tsx`ì—ì„œ import í•˜ì—¬ ì‚¬ìš©í•˜ë ¤ê³  í•œë‹¤.

`PostEditor` ì»´í¬ë„ŒíŠ¸ëŠ” ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í–ˆë‹¤.

```tsx
// components/newpost/PostEditor.tsx
import { Editor } from '@toast-ui/react-editor';
import '@toast-ui/editor/dist/toastui-editor.css';
import '@toast-ui/editor/dist/i18n/ko-kr';

export default function PostEditor() {
  return (
    <Editor
      previewStyle='vertical'
      height='800px'
      initialEditType='markdown'
      placeholder='Write Something'
      hideModeSwitch={true}
      language='ko-KR'
    />
  );
}
```

ê·¸ë¦¬ê³  `pages/newpost/index.tsx`ì— importí•´ì„œ ì‚¬ìš©í•˜ì˜€ë‹¤.

> ğŸ“Œ Toastì—ë””í„°ëŠ” ssrì„ ì§€ì›í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— `next/dynamic`ì„ ì‚¬ìš©í•˜ì—¬ ssrì„ í•˜ì§€ ì•Šë„ë¡ ì„¤ì •í•´ì£¼ì—ˆë‹¤. ì•„ë§ˆ Reactë¡œ ì‘ì—…í•˜ëŠ” ê²½ìš°ì—ëŠ” ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ì„ ê²ƒ ê°™ë‹¤.

```tsx
import dynamic from 'next/dynamic';

const PostEditor = dynamic(() => import('@/components/newpost/PostEditor'), {
  ssr: false,
});
```

<img width="1273" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-08-26 á„‹á…©á„Œá…¥á†« 2 56 31" src="https://github.com/nostrss/nostrss.github.io/assets/56717167/ea6f52f2-bf76-4cd6-9f25-d0f71ed0d9e6">

ì •ìƒì ìœ¼ë¡œ ì˜ ë‚˜ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="nextjs"/>
        <category label="react"/>
        <category label="javascript"/>
        <category label="typescript"/>
        <category label="toast"/>
        <category label="editor"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
    <entry>
        <title type="html"><![CDATA['[NEXT] TOAST Editor customHTMLSanitizer ì‚¬ìš©í•˜ê¸°']]></title>
        <id>2023-08-25-150-toast-next-5</id>
        <link href="https://nostrss.me/2023-08-25-150-toast-next-5"/>
        <updated>2023-08-25T00:00:00.000Z</updated>
        <summary type="html"><![CDATA['[NEXT] TOAST Editor customHTMLSanitizer ì‚¬ìš©í•˜ê¸°']]></summary>
        <content type="html"><![CDATA[

> - [1.TOAST Editorì— ì‚¬ìš©í•˜ê¸°](https://nostrss.github.io/2023-08-25/146-toast-next-1)
> - [2.TOAST Editorì— ì‘ì„±í•œ ê¸€ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°(useRef)](https://nostrss.github.io/2023-08-25/147-toast-next-2)
> - [3.TOAST Editorì—ì„œ ì´ë¯¸ì§€ ì—…ë¡œë“œí•˜ê¸°(hooks)](https://nostrss.github.io/2023-08-25/148-toast-next-3)
> - [4.TOAST Editor Viewer ì‚¬ìš©í•˜ê¸°](https://nostrss.github.io/2023-08-25/149-toast-next-4)
> - [5.TOAST Editor customHTMLSanitizer ì‚¬ìš©í•˜ê¸°](https://nostrss.github.io/2023-08-25/150-toast-next-5)

## TOAST Editor customHTMLSanitizer ì‚¬ìš©í•˜ê¸°

ì—ë””í„°ì˜ ê²½ìš° ìœ ì €ê°€ ì•…ì˜ì ì¸ ìš©ë„ë¡œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚½ì…í•˜ì—¬ ê³µê²©í•  ìœ„í—˜ì´ ìˆë‹¤.

ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ì„œëŠ” HTML ìš”ì†Œì— ê³µê²©ì„ í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë“±ì„ ì‚­ì œí•´ì•¼ í•œë‹¤.

ì´ëŸ° ê¸°ëŠ¥ì„ í•˜ëŠ” npm íŒ¨í‚¤ì§€ê°€ ìˆëŠ”ë°, `Dompurify`ì´ë‹¤.

> [ğŸ”— dompurify npm í˜ì´ì§€ ë°”ë¡œê°€ê¸° ğŸ”—](https://www.npmjs.com/package/dompurify?activeTab=readme)

## TOAST Editor ìì²´ì ì¸ Sanitizer

ì•ì„œ EditorOptionsì„ ì‚´í´ë´¤ì„ë•Œ `customHTMLSanitizer`ë¼ëŠ” Propsê°€ ì¡´ì¬í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.

> [ğŸ”— EditorOptions ë¬¸ì„œ ë°”ë¡œê°€ê¸° ğŸ”—](https://nhn.github.io/tui.editor/latest/ToastUIEditorCore)

> [ğŸ”— customHTMLSanitizer ì˜µì…˜ ê¸°ëŠ¥ ì¶”ê°€ ğŸ”—](https://ui.toast.com/weekly-pick/ko_monthly_202004)

```ts
// node_modules/@toast-ui/editor/types/editor.d.ts
export interface EditorOptions {
  (...)
  customHTMLSanitizer?: Sanitizer;
  (...)
}
```

`customHTMLSanitizer`ë¼ëŠ” í‘œí˜„ì´ ìˆëŠ” ê²ƒìœ¼ë¡œ ë³´ì•„ ì´ëŸ° ìƒê°ì´ ë“¤ì—ˆë‹¤.

> í˜¹ì‹œ Toast Editorì—ëŠ” ì´ë¯¸ Sanitizerê°€ ì ìš©ë˜ì–´ ìˆëŠ”ê²Œ ì•„ë‹ê¹Œ

í…ŒìŠ¤íŠ¸ë¥¼ í•´ë´ì•¼ê² ë‹¤.

`dompurify` í˜ì´ì§€ì— ìƒ˜í”Œì½”ë“œê°€ ìˆì–´ì„œ ì´ë¥¼ ê°€ì ¸ì™€ì„œ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë´¤ë‹¤.
`Markdown`, `wysiwyg` ëª¨ë“œ ë‘˜ë‹¤ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë´¤ë‹¤.

```tsx
const onSubmitNewPost = (e: FormEvent) => {
  e.preventDefault();
  const markDownContent = editorRef.current?.getInstance().getMarkdown();
  const htmlContent = editorRef.current?.getInstance().getHTML();
  console.log('1ï¸âƒ£', markDownContent);
  console.log('2ï¸âƒ£', htmlContent);
};
```

ì—ë””í„°ì— ìƒ˜í”Œì½”ë“œë¥¼ ì…ë ¥í•˜ê³  ì–´ë–»ê²Œ ê°’ì´ ë°˜í™˜ë˜ëŠ”ì§€ í™•ì¸í•´ë³´ì•˜ë‹¤.

```javascript
DOMPurify.sanitize('<img src=x onerror=alert(1)//>');
// dompurify : <img src="x">
// Markdown :  <img src=x onerror=alert(1)//>
// wysiwyg : <p><img src="x" contenteditable="false"><br></p>

DOMPurify.sanitize('<svg><g/onload=alert(2)//<p>');
// dompurify : <svg><g></g></svg>
// Markdown : <svg><g/onload=alert(2)//<p>
// wysiwyg : <p>&lt;g/onload=alert(2)//</p>

DOMPurify.sanitize('<p>abc<iframe//src=jAva&Tab;script:alert(3)>def</p>');
// dompurify : <p>abc</p>
// Markdown : <p>abc<iframe//src=jAva&Tab;script:alert(3)>def</p>
// wysiwyg : <p>abc</p>

DOMPurify.sanitize('<math><mi//xlink:href="data:x,<script>alert(4)</script>">');
// dompurify : <math><mi></mi></math>
// Markdown : <math><mi//xlink:href="data:x,<script>alert(4)</script>">
// wysiwyg : <p>&lt;mi//xlink:href="data:x,alert(4)"&gt;</p>

DOMPurify.sanitize('<TABLE><tr><td>HELLO</tr></TABL>');
// dompurify : <table><tbody><tr><td>HELLO</td></tr></tbody></table>
// Markdown : <TABLE><tr><td>HELLO</tr></TABL>
// wysiwyg : <table><thead><tr><td><p>HELLO</p></td></tr></thead><tbody><tr></tr></tbody></table>

DOMPurify.sanitize('<UL><li><A HREF=//google.com>click</UL>');
// dompurify : <ul><li><a href="//google.com">click</a></li></ul>
// Markdown : <UL><li><A HREF=//google.com>click</UL>
// wysiwyg : <ul><li><p><a href="//google.com">click</a></p></li></ul>
```

`dompurify`ì™€ ë°©ì‹ì€ ë‹¤ë¥´ì§€ë§Œ `wysiwyg` ëª¨ë“œì—ì„œëŠ” Toast ì—ë””í„° ìì²´ì ìœ¼ë¡œ `Sanitizer`ê°€ ì ìš©ë˜ì–´ ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.

## Custom Sanitizer ì‚¬ìš©í•˜ê¸°

ì´ì œëŠ” customHTMLSanitizerë¥¼ ì‚¬ìš©í•´ë³´ë ¤ê³  í•œë‹¤.

```ts
export type Sanitizer = (content: string) => string;
```

`customHtmlSanitizer`ëŠ” `Sanitizer`ë¼ëŠ” íƒ€ì…ì„ ê°€ì§€ê³  ìˆê³ , `Sanitizer`ëŠ” `content`ë¼ëŠ” `string`ì„ ë°›ì•„ì„œ `string`ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.

ì¼ë‹¨ ê°„ë‹¨íˆ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ê¸° ìœ„í•´ì„œ ì•„ë˜ì™€ ê°™ì´ í•¨ìˆ˜ë¥¼ í•˜ë‚˜ ì‘ì„±í•˜ì—¬ `customHTMLSanitizer`ì™€ ì—°ê²°í•´ë³´ì•˜ë‹¤.

```tsx
export default function PostEditor({
  editorRef,
}: {
  editorRef: RefObject<Editor>;
}) {
  // í…ŒìŠ¤íŠ¸ìš© Sanitizer í•¨ìˆ˜
  const testSanitizer = (text: string) => {
    console.log(text);
    return text;
  };

  return (
    <Editor
      ref={editorRef}
      previewStyle='vertical'
      height='800px'
      initialEditType='markdown'
      placeholder='Write Something'
      hideModeSwitch={true}
      language='ko-KR'
      customHTMLSanitizer={testSanitizer}
    />
  );
}
```

`testSanitizer` í•¨ìˆ˜ê°€ ì˜ ì—°ê²°ë˜ì–´ ì‘ë™ì„ í•œë‹¤ë©´, `console.log(text)`ê°€ ì‹¤í–‰ë˜ì–´ ì½˜ì†”ì— `text`ê°€ ì¶œë ¥ë  ê²ƒì´ë‹¤.

<img width="1277" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-08-27 á„‹á…©á„’á…® 2 33 05" src="https://github.com/nostrss/nostrss.github.io/assets/56717167/b5a15924-3b87-4089-9cad-92dcd7daba24">

í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í• ë•Œ ë§ˆë‹¤ ì§ì ‘ ìƒì„±í•œ `testSanitizer` í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.

> ì¦‰, Toast Editorì—ëŠ” ì´ë¯¸ Sanitizerê°€ ì ìš©ë˜ì–´ ìˆë‹¤. ê·¸ë¦¬ê³  ë³„ë„ì˜ Sanitizerë¥¼ ì ìš©í•˜ë ¤ë©´ customHTMLSanitizerì— stringì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì•„ì„œ stringì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë„£ì–´ì£¼ë©´ ëœë‹¤.

## dompurify ì ìš©í•˜ê¸°

Toast Editor ìì²´ì ìœ¼ë¡œ Sanitizerê°€ ì ìš©ë˜ì–´ ìˆì§€ë§Œ, `dompurify`ë¥¼ ì ìš©í•´ë³´ê¸°ë¡œ í–ˆë‹¤.

ì¼ë‹¨ ê¸€ì„ ì‘ì„±í•˜ëŠ” ì—ë””í„°ì— ì ìš©ì„ í•´ì£¼ì—ˆë‹¤. ë°©ë²•ì€ ê°„ë‹¨í–ˆë‹¤.

```tsx
// dompurify Import
import * as DOMPurify from 'dompurify';

export default function PostEditor({
  editorRef,
}: {
  editorRef: RefObject<Editor>;
}) {
  const customSanitizer = DOMPurify.sanitize;

  return (
    <Editor
      ref={editorRef}
      previewStyle='vertical'
      height='800px'
      initialEditType='markdown'
      placeholder='Write Something'
      hideModeSwitch={true}
      language='ko-KR'
      // customHTMLSanitizerì— dompurify ì ìš©
      customHTMLSanitizer={customSanitizer}
    />
  );
}
```

ê·¸ë¦¬ê³  `Viewer`ì—ë„ ë™ì¼í•˜ê²Œ ì ìš©ì„ í•´ì£¼ì—ˆë‹¤.

ì‘ì„±í• ë•Œ ì´ë¯¸ dompurifyê°€ ì ìš©ë˜ì–´ ìˆê¸´ í•˜ì§€ë§Œ, `Viewer`ì—ì„œë„ `dompurify`ë¥¼ ì ìš©í•´ì£¼ëŠ” ê²ƒì´ ë³´ì•ˆì— ì¢‹ì„ ê²ƒ ê°™ì•„ì„œ ì ìš©í•´ì£¼ì—ˆë‹¤.

```tsx
import { Viewer } from '@toast-ui/react-editor';
import * as DOMPurify from 'dompurify';

export default function EditorViewer({
  initialValue,
}: {
  initialValue: string;
}) {
  const customSanitizer = DOMPurify.sanitize;

  return (
    <Viewer initialValue={initialValue} customHTMLSanitizer={customSanitizer} />
  );
}
```
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="nextjs"/>
        <category label="react"/>
        <category label="javascript"/>
        <category label="typescript"/>
        <category label="toast"/>
        <category label="dompurify"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
    <entry>
        <title type="html"><![CDATA['[NEXT] TOAST Editor Viewer ì‚¬ìš©í•˜ê¸°']]></title>
        <id>2023-08-25-149-toast-next-4</id>
        <link href="https://nostrss.me/2023-08-25-149-toast-next-4"/>
        <updated>2023-08-25T00:00:00.000Z</updated>
        <content type="html"><![CDATA[

> - [1.TOAST Editorì— ì‚¬ìš©í•˜ê¸°](https://nostrss.github.io/2023-08-25/146-toast-next-1)
> - [2.TOAST Editorì— ì‘ì„±í•œ ê¸€ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°(useRef)](https://nostrss.github.io/2023-08-25/147-toast-next-2)
> - [3.TOAST Editorì—ì„œ ì´ë¯¸ì§€ ì—…ë¡œë“œí•˜ê¸°(hooks)](https://nostrss.github.io/2023-08-25/148-toast-next-3)
> - [4.TOAST Editor Viewer ì‚¬ìš©í•˜ê¸°](https://nostrss.github.io/2023-08-25/149-toast-next-4)
> - [5.TOAST Editor customHTMLSanitizer ì‚¬ìš©í•˜ê¸°](https://nostrss.github.io/2023-08-25/150-toast-next-5)

## TOAST Editor Viewer ì‚¬ìš©í•˜ê¸°

ì˜ˆì „ì— `React Quill`ì˜ ê²½ìš°ì—ëŠ” `Viewer`ë¥¼ ë”°ë¡œ ì œê³µí•˜ì§€ ì•Šê³ , `readOnly` ì†ì„±ì„ í†µí•´ í¸ì§‘ê¸°ì™€ ë·°ì–´ë¥¼ êµ¬ë¶„í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆì—ˆë‹¤.

í•˜ì§€ë§Œ `TOAST Editor`ì˜ ê²½ìš°ì—ëŠ” ì•„ì˜ˆ `Viewer`ë¥¼ ë”°ë¡œ ì œê³µí•˜ê³  ìˆì—ˆë‹¤.

ë¬¸ì„œì—ì„œëŠ” ì°¾ì§€ ëª»í–ˆëŠ”ë°, íƒ€ì…ì— ì•„ë˜ì™€ ê°™ì´ ì •ì˜ê°€ ë˜ì–´ ìˆì–´ì„œ ì‚¬ìš©í•´ë´¤ë‹¤.

```ts
export class Viewer extends Component<ViewerProps> {
  getInstance(): ToastuiEditorViewer;

  getRootElement(): HTMLElement;
}
```

ì´ì œ ìƒì„¸ í˜ì´ì§€ì— Viewerë¥¼ ì ìš©í•´ë³´ì.

```tsx
import { Viewer } from '@toast-ui/react-editor';

export default function EditorViewer({
  initialValue,
}: {
  initialValue: string;
}) {
  return <Viewer initialValue={initialValue} />;
}
```

ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ `Props`ë¡œ `initialValue`ì— ì»¨í…ì¸  ì •ë³´ë¥¼ ë°›ì•„ì˜¤ê³ , ì´ê²ƒì„ ë‹¨ìˆœíˆ `Viewer`ì— ì „ë‹¬í•´ì£¼ê¸°ë§Œ í•˜ë©´ ëœë‹¤.

`Viewer`ì˜ ê²½ìš°ì—ë„ `import`ì‹œ ì•„ë˜ì™€ ê°™ì´ `dynamic import`ë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤.

```tsx
const EditorViewer = dynamic(() => import('@/components/post/EditorViewer'), {
  ssr: false,
});
```

ì ìš©í•œ ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

<img width="772" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-08-26 á„‹á…©á„’á…® 6 28 23" src="https://github.com/nostrss/nostrss.github.io/assets/56717167/bbef8fa5-73cf-492a-a01e-df5d5c3e8d46">
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="nextjs"/>
        <category label="react"/>
        <category label="javascript"/>
        <category label="typescript"/>
        <category label="toast"/>
        <category label="editor"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
    <entry>
        <title type="html"><![CDATA['PostgresSQL ì„¤ì¹˜ ì‹œ "/tmp/.s.PGSQL.5432" ì—ëŸ¬']]></title>
        <id>2023-08-24-145-postgre-install-error</id>
        <link href="https://nostrss.me/2023-08-24-145-postgre-install-error"/>
        <updated>2023-08-24T00:00:00.000Z</updated>
        <content type="html"><![CDATA[

Nest.jsë¥¼ ê³µë¶€í•˜ë©´ì„œ Brewë¡œ PostgresSQLì„ ì„¤ì¹˜í•˜ê³  DBë¥¼ ì—°ê²°í•˜ë ¤ê³  í–ˆëŠ”ë° ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤.

```bash
psql postgres

psql: error: connection to server on socket "/tmp/.s.PGSQL.5432" failed: No such file or directory
```

ê²€ìƒ‰ì„ í•´ë³´ë‹ˆ ë‹¤ì–‘í•œ ê²°ê³¼ë“¤ì´ ë‚˜ì™”ë‹¤.

- ì‚­ì œ í›„ ì¬ì„¤ì¹˜ í•˜ëŠ” ë°©ë²•
- ì¬ë¶€íŒ… í•˜ëŠ” ë°©ë²•
- postgresql@13ì„ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•(ë‚˜ëŠ” 14ë²„ì „ì„ ì‚¬ìš©í•˜ê³  ì‹¶ì—ˆë‹¤.)

chatgptë„ ì‚¬ìš©í•´ë´¤ìœ¼ë‚˜ ì „ë¶€ ì‹¤íŒ¨í–ˆë‹¤.

ê·¸ëŸ¬ë‹¤ stackoverflowì—ì„œ ì•„ë˜ì™€ ê°™ì€ ë‹µë³€ì„ ì°¾ì•˜ë‹¤.

[stack overflow ì›ë³¸ë§í¬](https://stackoverflow.com/questions/69754628/psql-error-connection-to-server-on-socket-tmp-s-pgsql-5432-failed-no-such)

ìœ„ì˜ ë§í¬ ì¤‘ê°„ì— ë³´ë©´ ì•„ë˜ì™€ ê°™ì€ ë‹µë³€ì´ ìˆì—ˆë‹¤.

```bash
brew services start postgresql
```

ìœ„ì˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ê³  ë‹¤ì‹œ psqlì„ ì‹¤í–‰í•˜ë‹ˆ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ì—ˆë‹¤.

```
psql postgres
```

ê°œë°œì€ ì²˜ìŒì— ì„¤ì¹˜ì™€ í™˜ê²½ì„¤ì •ì´ ì œì¼ ì–´ë µë‹¤..
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="nestjs"/>
        <category label="node"/>
        <category label="express"/>
        <category label="javascript"/>
        <category label="typescript"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
    <entry>
        <title type="html"><![CDATA['[Nest.js] - ì†Œê°œ']]></title>
        <id>2023-08-23-144-nestjs</id>
        <link href="https://nostrss.me/2023-08-23-144-nestjs"/>
        <updated>2023-08-23T00:00:00.000Z</updated>
        <content type="html"><![CDATA[

> [Nest.js ê³µì‹ ë¬¸ì„œ](https://docs.nestjs.com/)ë¥¼ ì°¸ê³ í•˜ì˜€ìŠµë‹ˆë‹¤.

## Nest.jsë€?

- Node.js ì„œë²„ ì¸¡ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ê¸° ìœ„í•œ í”„ë ˆì„ ì›Œí¬

## íŠ¹ì§•

- `Angular`ì™€ ë¹„ìŠ·í•œ êµ¬ì¡°ì´ë©° ì´ì— ì˜ê°ì„ ë°›ì€ ê²ƒìœ¼ë¡œ ì•Œë ¤ì ¸ ìˆìŠµë‹ˆë‹¤.
- `Typescript`ë¥¼ ê¸°ë³¸ ì–¸ì–´ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.
- `Express`ë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ ì‚¬ìš©í•˜ë©° `Fastify`ë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ê°ì²´ì§€í–¥ ê°œë…ì„ ë„ì…í•˜ì˜€ìŠµë‹ˆë‹¤.

## ì¥ì 

### Angularì™€ ë¹„ìŠ·í•œ êµ¬ì¡°

- ëª¨ë“ˆ/ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ìœ¼ë¡œ í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•¨ìœ¼ë¡œì¨ ì¬ì‚¬ìš©ì„±ì„ ë†’ì—¬ì¤ë‹ˆë‹¤.
  > í”„ë¡ íŠ¸ ì—”ë“œë¥¼ ë¨¼ì € ì‹œì‘í•œ ë‚˜ë¡œì„œëŠ” ëª¨ë“ˆê¸°ë°˜ì´ë¼ëŠ” ë§ì´ ì˜ ì™€ë‹¿ì§€ ì•Šì•˜ë‹¤.

### Expressì˜ ë‹¨ì ì„ ë³´ì™„

- expresssëŠ” í›Œë¥­í•œ í”„ë ˆì„ì›Œí¬ì´ì§€ë§Œ, ê³¼ë„í•œ ìœ ì—°í•¨ìœ¼ë¡œ ì¸í•´ SWì˜ í’ˆì§ˆì´ ì¼ì •í•˜ì§€ ì•Šê³  ì•Œë§ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì°¾ê¸° ìœ„í•´ ì‚¬ìš©ìê°€ ë§ì€ ì‹œê°„ì„ í• ì• í•´ì•¼ í•©ë‹ˆë‹¤.

- í•˜ì§€ë§Œ Nest.jsëŠ” ë°ì´í„°ë² ì´ìŠ¤, ORM, ì„¤ì •(Configuration), ìœ íš¨ì„± ê²€ì‚¬ ë“± ìˆ˜ë§ì€ ê¸°ëŠ¥ì„ ê¸°ë³¸ ì œê³µí•˜ê³  ìˆë‹¤. ê·¸ëŸ¬ë©´ì„œë„ í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‰½ê²Œ ì„¤ì¹˜í•˜ì—¬ ê¸°ëŠ¥ì„ í™•ì¥í•  ìˆ˜ ìˆëŠ” Node.js ì¥ì ì€ ê·¸ëŒ€ë¡œ ê°€ì§€ê³  ìˆë‹¤ê³  í•œë‹¤.

> ì¦‰, ExpressëŠ” React, Nest.jsëŠ” Next.js, Nuxt.jsì™€ ê°™ì€ í”„ë¡ íŠ¸ì—”ë“œ í”„ë ˆì„ì›Œí¬ì™€ ë¹„ìŠ·í•œ ì—­í• ì„ í•œë‹¤ê³  ì´í•´í•˜ë©´ ë  ê²ƒ ê°™ë‹¤.

## ì„¤ì¹˜ ë° ì„¤ì •

ì•„ë˜ 2ê°œì˜ ëª…ë ¹ì–´ë¥¼ í„°ë¯¸ë„ì—ì„œ ì‹¤í–‰í•˜ì—¬ ì„¤ì¹˜ì™€ ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ì„¤ì • í•  ìˆ˜ ìˆë‹¤.

```bash
npm i -g @nestjs/cli
nest new project-name

```

### í•µì‹¬ íŒŒì¼

ì„¤ì¹˜ë¥¼ ì™„ë£Œí•˜ë©´ src í´ë”ì— ì•„ë˜ì™€ ê°™ì€ íŒŒì¼ë“¤ì´ ìƒì„±ëœë‹¤.

|                          |                                                                                                                                                             |
| ------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `app.controller.ts`      | í´ë¼ì´ì–¸íŠ¸ë¡œ ë¶€í„° ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ `service`ì•  ìœ„ì„í•˜ê³  ì²˜ë¦¬ëœ ê²°ê³¼ë¥¼ ë‹¤ì‹œ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë°˜í™˜í•˜ëŠ” ì¼ì„ ë‹´ë‹¹í•œë‹¤. HTTP ìš”ì²­ ë©”ì„œë“œ(GET, POST ë“±)ë¥¼ ì •ì˜í•œë‹¤. |
| `app.controller.spec.ts` | ì»¨íŠ¸ë¡¤ëŸ¬ì— ëŒ€í•œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ íŒŒì¼ ì´ë‹¤.                                                                                                                      |
| `app.module.ts`          | ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë£¨íŠ¸ ëª¨ë“ˆ. Nest.jsì—ì„œëŠ” ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì„±í•œë‹¤. ëª¨ë“ˆì€ ê¸°ëŠ¥ê³¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ë‹¹í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ ì§‘í•©ì´ë¼ í•  ìˆ˜ ìˆë‹¤.     |
| `app.service.ts`         | `controller`ë¡œë¶€í„° ìœ„ì„ë°›ì€ ìš”ì²­ì„ ì‹¤ì œë¡œ ì²˜ë¦¬í•˜ê³  ë°˜í™˜í•˜ëŠ” ì—­í• ì„ í•œë‹¤. ì¦‰,ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ êµ¬í˜„í•˜ëŠ” ì—­í• ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.                                 |
| `main.ts`                | Nest.jsì˜ ì§„ì…ì , NestFactoryí•µì‹¬ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ Nest ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í•­ëª© íŒŒì¼ì´ë‹¤. HTTP ì„œë²„ë¥¼ ì‹œì‘í•˜ëŠ” ì—­í• ì„ í•œë‹¤.     |

## ì‹¤í–‰

```bash
npm run start
npm run start:dev // ê°œë°œ ëª¨ë“œ
```
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="nestjs"/>
        <category label="node"/>
        <category label="express"/>
        <category label="javascript"/>
        <category label="typescript"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
    <entry>
        <title type="html"><![CDATA['reduce ì‚¬ìš©ë²• ì •ë¦¬']]></title>
        <id>2023-07-11-142-javascript-reduce</id>
        <link href="https://nostrss.me/2023-07-11-142-javascript-reduce"/>
        <updated>2023-07-11T00:00:00.000Z</updated>
        <content type="html"><![CDATA[

ì¢€ ì²˜ëŸ¼ í”„ë¡ íŠ¸ì—”ë“œ ì‹¤ë¬´ë¥¼ í•˜ë©´ì„œëŠ” ìì£¼ ì‚¬ìš©í•  ê¸°íšŒê°€ ì—†ì—ˆë˜ ë©”ì†Œë“œê°€ ë°”ë¡œ reduceì˜€ë‹¤.

ì–¼ë§ˆ ì „ ì§€ì¸ì˜ ì½”ë“œë¥¼ ìˆ˜ì •í•´ì£¼ë‹¤ê°€ reduceë¥¼ ì‚¬ìš©í•œ ë¶€ë¶„ì´ ìˆì–´ì„œ ì •ë¦¬í•´ë´¤ë‹¤.

## ë“±ì°¨ìˆ˜ì—´

ê°‘ìê¸° ë“±ì°¨ìˆ˜ì—´ì´ ì™œ ë‚˜ì˜¤ëƒê³ ? ë¼ê³  ìƒê°í•  ìˆ˜ ìˆì§€ë§Œ, reduceë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ë“±ì°¨ìˆ˜ì—´ì„ ê³µì‹ê³¼ ì—°ê´€ì§€ì–´ ìƒê°í•˜ë‹ˆ ì´í•´ê°€ ì‰¬ì›Œì ¸ì„œ ì˜ˆì‹œë¥¼ ë“¤ì—ˆë‹¤.

### ë“±ì°¨ìˆ˜ì—´ ê³µì‹

```text
a(n) = a(1) + (n - 1) * d
```

ë“±ì°¨ ìˆ˜ì—´ì˜ ê³µì‹ì€ ìœ„ì™€ ê°™ë‹¤.

ìˆ˜ì—´ì˜ ì²« í•­ a(1)ì´ ìˆê³  ê³µì°¨ dê°€ ìˆë‹¤ë©´, në²ˆì§¸ í•­ì€ ìœ„ì™€ ê°™ì´ êµ¬í•  ìˆ˜ ìˆë‹¤.

ì´ê²ƒì„ reduceì™€ ë¹„êµí•´ë³´ì.

### reduce

ë¦¬ë“€ìŠ¤ì˜ êµ¬ë¬¸ì€ ì•„ë˜ì™€ ê°™ë‹¤.

```js
 arr.reduce(callback[, initialValue])
```

callbackì€ í•„ìˆ˜ê°’ì´ê³ , initialValueëŠ” ì˜µì…˜ì´ë‹¤.

reduce ë©”ì†Œë“œëŠ” initialValue ê°’ì— callback í•¨ìˆ˜ë¥¼ ì ìš©í•˜ì—¬ í•˜ë‚˜ì˜ ê²°ê³¼ê°’ì„ ë§Œë“¤ì–´ë‚¸ë‹¤.

ì¦‰, ë“±ì°¨ìˆ˜ì—´ì˜ ì²«í•­ a(1)ì´ initialValueì´ê³ , ê³µì°¨ dê°€ callback í•¨ìˆ˜ë¼ê³  ìƒê°í•˜ë©´ ì´í•´ê°€ ì‰½ë‹¤.

mdnì— ë‚˜ì™€ ìˆëŠ” ì˜ˆì‹œë¥¼ í†µí•´ ì‚´í´ë³´ì.

[mdn reduce ì˜ˆì‹œ ](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)

```js
[0, 1, 2, 3, 4].reduce(function (
  accumulator,
  currentValue,
  currentIndex,
  array
) {
  return accumulator + currentValue;
},
10);
```

|  callback  | accumulator | currentValue | currentIndex |      array      | return value |
| :--------: | :---------: | :----------: | :----------: | :-------------: | :----------: |
| 1ë²ˆì§¸ í˜¸ì¶œ |     10      |      0       |      0       | [0, 1, 2, 3, 4] |      10      |
| 2ë²ˆì§¸ í˜¸ì¶œ |     10      |      1       |      1       | [0, 1, 2, 3, 4] |      11      |
| 3ë²ˆì§¸ í˜¸ì¶œ |     11      |      2       |      2       | [0, 1, 2, 3, 4] |      13      |
| 4ë²ˆì§¸ í˜¸ì¶œ |     13      |      3       |      3       | [0, 1, 2, 3, 4] |      16      |
| 5ë²ˆì§¸ í˜¸ì¶œ |     16      |      4       |      4       | [0, 1, 2, 3, 4] |      20      |

ìœ„ì˜ í‘œë¥¼ ë³´ë©´ ì´í•´ê°€ ì‰½ë‹¤.

initialValueê°€ 10ì´ê³ , callback í•¨ìˆ˜ê°€ accumulatorì— currentValueë¥¼ ë”í•´ì£¼ëŠ” í˜•íƒœì´ë‹¤.

ì¦‰, ë“±ì°¨ìˆ˜ì—´ì—ì„œ ê³µì°¨ dê°€ 1ì´ë¼ê³  ìƒê°í•˜ë©´, initialValueëŠ” a(1)ì´ê³ , callback í•¨ìˆ˜ëŠ” dê°€ ëœë‹¤.

ë¬¼ë¡  reduceê°€ ë“±ì°¨ìˆ˜ì—´ë¡œë§Œ ì ìš©ë˜ëŠ” ê²ƒì€ ì•„ë‹ˆê³  ë‹¤ì–‘í•œ ìš©ë„ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ, ì´ë ‡ê²Œ ì´í•´ë“¤ í•´ë‘ê³  ë‚˜ë¨¸ì§€ëŠ” ì‘ìš©ì„ í•˜ë©´ ë˜ê² ë‹¤.
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="javascript"/>
        <category label="reduce"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
    <entry>
        <title type="html"><![CDATA['[NEXT] page.js (with App Router)']]></title>
        <id>2023-07-11-141-next-page-app-router</id>
        <link href="https://nostrss.me/2023-07-11-141-next-page-app-router"/>
        <updated>2023-07-11T00:00:00.000Z</updated>
        <content type="html"><![CDATA[

## Props

NEXT.JSì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ì— Propsë¡œ paramsì™€ searchParamsë¥¼ ì „ë‹¬í•´ì¤€ë‹¤.

ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì•„ë¬´ëŸ° Propsë¥¼ ì „ë‹¬í•˜ì§€ ì•Šì•„ë„ paramsì™€ searchParamsë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```js
export default function Page({
  params,
  searchParams,
}: {
  params: { slug: string }
  searchParams: { [key: string]: string | string[] | undefined }
}) {
  return <h1>My Page</h1>
}
```

## params

`params`: URLì˜ pathì— ìˆëŠ” ë™ì  ê²½ë¡œ íŒŒë¼ë¯¸í„°ë¥¼ ë‹´ê³  ìˆëŠ” ê°ì²´ì´ë‹¤.

ì˜ˆë¥¼ ë“¤ë©´ ì•„ë˜ì™€ ê°™ë‹¤.

| Example                            | URL       | params                       |
| :--------------------------------- | :-------- | :--------------------------- |
| app/shop/[slug]/page.js            | /shop/1   | { slug: '1' }                |
| app/shop/[category]/[item]/page.js | /shop/1/2 | { category: '1', item: '2' } |
| app/shop/[...slug]/page.js         | /shop/1/2 | { slug: ['1', '2'] }         |

ì˜ˆì „ì— ë‚˜ëŠ” useRouterë¥¼ ì‚¬ìš©í•´ì„œ paramsë¥¼ ê°€ì ¸ì™”ì—ˆëŠ”ë°, ì´ì œëŠ” ì´ë ‡ê²Œ ê°„ë‹¨í•˜ê²Œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.

## searchParams

`searchParams`: URLì˜ query stringì— ìˆëŠ” íŒŒë¼ë¯¸í„°ë¥¼ ë‹´ê³  ìˆëŠ” ê°ì²´

| URL           | searchParams       |
| :------------ | :----------------- |
| /shop?a=1     | { a: '1' }         |
| /shop?a=1&b=2 | { a: '1', b: '2' } |
| /shop?a=1&a=2 | { a: ['1', '2'] }  |

## useRouter ë³€ê²½ì‚¬í•­

ê·¸ë¦¬ê³  ì´ì™€ ê´€ë ¨í•˜ì—¬ ëª‡ê°€ì§€ ë‹¬ë¼ì§„ ì ì´ ìˆë‹¤. íŠ¹íˆ ë‚´ê°€ ë§ì´ ì‚¬ìš©í•˜ë˜ ê²ƒë“¤ ì¤‘ì— ë‹¬ë¼ì§„ ì‚¬í•­ì´ ìˆì–´ ì •ë¦¬í•´ë´¤ë‹¤.

> ìƒˆë¡œìš´ useRouterëŠ” importì‹œ next/navigationì—ì„œ ê°€ì ¸ì™€ì•¼í•œë‹¤.(ê¸°ì¡´ next/router)

> ë¬¸ìì—´ pathnameì€ usePathname()ìœ¼ë¡œ ëŒ€ì²´ë˜ì—ˆë‹¤.

> ë¬¸ìì—´ queryëŠ” useQuery()ë¡œ ëŒ€ì²´ë˜ì—ˆë‹¤.
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="nextjs"/>
        <category label="react"/>
        <category label="app-router"/>
        <category label="pagejs"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
    <entry>
        <title type="html"><![CDATA['React server componentì™€ Next.js']]></title>
        <id>2023-07-11-143-react-nextjs-server-component</id>
        <link href="https://nostrss.me/2023-07-11-143-react-nextjs-server-component"/>
        <updated>2023-07-11T00:00:00.000Z</updated>
        <content type="html"><![CDATA[

React 18 ë²„ì „ì—ì„œ ìƒˆë¡œ ì¶”ê°€ëœ ê¸°ëŠ¥ ì¤‘ í•˜ë‚˜ê°€ ë°”ë¡œ server componentì´ë‹¤.

ì•„ì§ ë§ì´ ì“°ì´ëŠ” ê²ƒ ê°™ì§€ëŠ” ì•Šì§€ë§Œ, Next.jsì—ì„œë„ app routerê°€ ì •ì‹ ë²„ì „ìœ¼ë¡œ ë‚˜ì˜¤ë©´ì„œ server componentë¥¼ ì§€ì›í•œë‹¤ê³  í•œë‹¤.

ê·¸ë˜ì„œ ì´ì— ëŒ€í•´ ì¡°ê¸ˆ ê³µë¶€í•´ë³´ì•˜ë‹¤.

## React server componentëŠ” ì™œ ë‚˜ì™”ì„ê¹Œ?

### ë²ˆë“¤ ì‚¬ì´ì¦ˆ ìµœì í™”

React18 ì´ì „ì˜ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ëŠ” í•œë§ˆë””ë¡œ 'í´ë¼ì´ì–¸íŠ¸' ì»´í¬ë„ŒíŠ¸ì˜€ë‹¤.

ê·¸ë˜ì„œ ëª¨ë“  ê²ƒì´ ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰ë˜ì—ˆë‹¤.(CSRì¸ ê²½ìš°)

ì½”ë“œë¥¼ ë‹¤ìš´ë¡œë“œ í•˜ê³ , DOMì— ë Œë”ë§í•˜ê³ , Dataë¥¼ fetchí•˜ê³ , ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê²ƒê¹Œì§€ ëª¨ë‘ ë¸Œë¼ìš°ì €ì—ì„œ ìˆ˜í–‰ë˜ì—ˆë‹¤.

ì´ëŠ” ë²ˆë“¤ ì‚¬ì´ì¦ˆê°€ ì»¤ì§€ëŠ” ì›ì¸ì´ ë˜ì—ˆë‹¤.

í•˜ì§€ë§Œ ì„œë²„ì—ì„œ ë Œë”ë§ì„ í•  ìˆ˜ ìˆê²Œ ëœë‹¤ë©´, ë¸Œë¼ìš°ì €ì—ì„œ ìˆ˜í–‰í•  ì‘ì—…ì„ ì¤„ì¼ ìˆ˜ ìˆê³ , ë²ˆë“¤ ì‚¬ì´ì¦ˆë¥¼ ì¤„ì¼ ìˆ˜ ìˆê²Œ ëœë‹¤.

ì¦‰, ê·¸ë™ì•ˆ ë¸Œë¼ìš°ì €ì—ì„œ í•˜ë˜ ì¼ì„ ì„œë²„ì™€ ë¸Œë¼ìš°ì €ê°€ ë‚˜ëˆ ì„œ ì‘ì—…ì„ í•  ìˆ˜ ìˆê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.

### ì„œë²„ ë¦¬ì†ŒìŠ¤ ë¦¬ì†ŒìŠ¤ ì ‘ê·¼

ì„œë²„ëŠ” ë°ì´í„° ë² ì´ìŠ¤, GraphQL, íŒŒì¼ì‹œìŠ¤í…œ ë“± ë°ì´í„° ë¦¬ì†ŒìŠ¤ì— ë¹ ë¥´ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆê³ , ì´ë¥¼ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì— Propsë¡œ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.

### ì„œë²„ ì»´í¬ë„ŒíŠ¸ì™€ SSR

ë‚˜ë„ ì°©ê° í–ˆë˜ ê²ƒ ì¤‘ í•˜ë‚˜ì¸ë° RSCëŠ” SSRê³¼ëŠ” ë‹¤ë¥´ë‹¤.

`server`ë¼ëŠ” ë‹¨ì–´ê°€ ë‘˜ë‹¤ ë“¤ì–´ê°€ì„œ ë”± ì°©ê°í•˜ê¸° ì¢‹ì€ ë“¯í•˜ë‹¤.

ì¢‹ì€ ë‚´ìš©ì´ ìˆì–´ì„œ ì•„ë˜ì— ì¸ìš©í•´ë´¤ë‹¤.

> Does this(RSC) replace SSR?

> No, theyâ€™re complementary. SSR is primarily a technique to quickly display a non-interactive version of client components. You still need to pay the cost of downloading, parsing, and executing those Client Components after the initial HTML is loaded.
> You can combine Server Components and SSR, where Server Components render first, with Client Components rendering into HTML for fast non-interactive display while they are hydrated. When combined in this way you still get fast startup, but you also dramatically reduce the amount of JS that needs to be downloaded on the client.

## Next.jsì—ì„œì˜ RSC

ì–¼ë§ˆì „ì— app routerê°€ ì •ì‹ ë²„ì „ìœ¼ë¡œ ë‚˜ì™”ë‹¤.

ë§ì€ ë³€í™”ê°€ ìˆì—ˆì§€ë§Œ ê°€ì¥ í° ë³€í™”ëŠ” ì•„ë§ˆ app í´ë”ê°€ ìƒê¸´ ê²ƒì´ ì•„ë‹ê¹Œ ì‹¶ë‹¤.

ê¸°ì¡´ ë²„ì „ì˜ Next.jsì—ì„œëŠ” pages í´ë”ì— ìˆëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ì „ë¶€ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë¡œ ì·¨ê¸‰í•˜ì˜€ë‹¤.

ê·¸ë¦¬ê³  ì´ë²ˆ ë²„ì „ì— ì¶”ê°€ëœ app í´ë”ëŠ” ë””í´íŠ¸ë¡œ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë¥¼ ì„œë²„ ì»´í¬ë„ŒíŠ¸ ì·¨ê¸‰ì„ í•œë‹¤.

> ë‹¹ë¶„ê°„ì€ pagesí´ë”ì™€ appí´ë”ë¥¼ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ê³  í•œë‹¤.

### ë¬´ì—‡ì´ ë‹¬ë¼ì§€ëŠ”ê°€?

ì„œë²„ ì»´í¬ë„ŒíŠ¸ì™€ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ êµ¬ë¶„í•˜ì—¬ ì‚¬ìš©í•  ì¤„ ì•Œì•„ì•¼ í•  ê²ƒ ê°™ë‹¤.

ì„œë²„ ì»´í¬ë„ŒíŠ¸ëŠ” Node.js í™˜ê²½ì—ì„œ ì‹¤í–‰ë˜ê³ , í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ëŠ” ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œ ì‹¤í–‰ëœë‹¤.

ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì„œë²„ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ê¸°ì¡´ì— ìš°ë¦¬ê°€ ì‚¬ìš©í–ˆë˜ Browser APIs, ì´ë²¤íŠ¸, React Lifecycle Effect, Hooks ë“±ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.

ê¸°ì¡´ì²˜ëŸ¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ ìµœìƒë‹¨ì— `use client`ë¥¼ ì„ ì–¸í•´ì£¼ë©´ ëœë‹¤.

```js
'use client';

import { useState } from 'react';

export default function Counter() {
  const [count, setCount] = useState(0);

  return (
    <div>
      <p>You clicked {count} times</p>
      <button onClick={() => setCount(count + 1)}>Click me</button>
    </div>
  );
}
```

## Reference

- [https://github.com/reactjs/rfcs/blob/main/text/0188-server-components.md](https://github.com/reactjs/rfcs/blob/main/text/0188-server-components.md)
- [https://tech.kakaopay.com/post/react-server-components/](https://tech.kakaopay.com/post/react-server-components/)
- [https://yceffort.kr/2022/01/how-react-server-components-work](https://yceffort.kr/2022/01/how-react-server-components-work)
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="react"/>
        <category label="rsc"/>
        <category label="next.js"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
    <entry>
        <title type="html"><![CDATA['ë Œë”ë§ì˜ ì¢…ë¥˜ì™€ ìš©ì–´ ì •ë¦¬']]></title>
        <id>2023-07-10-140-frontend-of-term</id>
        <link href="https://nostrss.me/2023-07-10-140-frontend-of-term"/>
        <updated>2023-07-10T00:00:00.000Z</updated>
        <content type="html"><![CDATA[

# ë Œë”ë§ì˜ ì¢…ë¥˜ì™€ ìš©ì–´ ì •ë¦¬

í˜„ì—…ì—ì„œ CSRë§Œ ì‚¬ìš©í•´ë´ì„œ ë‹¤ë¥¸ ë Œë”ë§ ë°©ì‹ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ë‹¤ê°€ ìš©ì–´ ì •ë¦¬ê°€ ì¢€ í•„ìš”í•œ ê²ƒ ê°™ì•„ì„œ ì •ë¦¬í•´ë´¤ë‹¤.

## CSR : client side rendering

- ë Œë”ë§ì˜ ì£¼ì²´ : Browser
- ë Œë”ë§ì˜ ê³¼ì •
  - ë¹ˆ HTML íŒŒì¼ì„ ë°›ì•„ì˜¨ë‹¤
  - JS íŒŒì¼ì„ ë°›ì•„ì˜¨ë‹¤
  - JS íŒŒì¼ì„ ì‹¤í–‰í•œë‹¤
  - ë°ì´í„°ë¥¼ ë°›ì•„ì˜¨ë‹¤
  - DOM Treeë¥¼ ë§Œë“ ë‹¤
  - HTMLì„ ë Œë”ë§í•œë‹¤

### ì¥ì 

- í•œë²ˆë§Œ ë¡œë”©(HTML, JS)ì´ ë˜ë©´ ì´í›„ì—ëŠ” ë¹ ë¥´ê²Œ ë Œë”ë§ì´ ê°€ëŠ¥í•˜ë‹¤
- ì„œë²„ì˜ ë¶€í•˜ê°€ ì ë‹¤
- ë³€ê²½ë˜ëŠ” ì¼ë¶€ë¶„ë§Œ ë Œë”ë§ì´ ê°€ëŠ¥í•˜ë‹¤

### ë‹¨ì 

- TTV, FCP ì‹œê°„ì´ ê¸¸ë‹¤.

  > TTV : time to view, ìœ ì €ê°€ í™”ë©´ì„ ë³¼ë•Œê¹Œì§€ì˜ ì‹œê°„
  > FCP : first contentful paint, ìœ ì €ê°€ í™”ë©´ì— ì²˜ìŒìœ¼ë¡œ ë¬´ì–¸ê°€ë¥¼ ë³¼ ìˆ˜ ìˆëŠ” ì‹œê°„

- SEO ìµœì í™”ê°€ ì–´ë µë‹¤.

## SSG : static site generation

- ë Œë”ë§ì˜ ê³¼ì • : ë¹Œë“œí•  ë•Œ HTML íŒŒì¼ì„ ë Œë”ë§í•˜ì—¬ ì •ì  ì‚¬ì´íŠ¸ë¥¼ ìƒì„±í•œë‹¤.

### ì¥ì 

- í˜ì´ì§€ ë¡œë”©ì´ ë¹ ë¥´ë‹¤.
- SEO ìµœì í™”ê°€ ê°€ëŠ¥í•˜ë‹¤.

### ë‹¨ì 

- ë°ì´í„°ê°€ ì •ì ì´ê³  ì‹¤ì‹œê°„ ë°ì´í„°ê°€ ì•„ë‹ˆë‹¤.

## ISR : incremental static regeneration

- ë Œë”ë§ ê³¼ì • - SSG ì²˜ëŸ¼ ë¹Œë“œ ì‹œ HTML íŒŒì¼ì„ ë Œë”ë§í•˜ì—¬ ì •ì  ì‚¬ì´íŠ¸ë¥¼ ìƒì„±í•œë‹¤. ê·¸ë¦¬ê³  ì •í•´ì§„ ì£¼ê¸°ì— ë”°ë¼ ì •ì  ì‚¬ì´íŠ¸ë¥¼ ì¬ìƒì„±í•œë‹¤.

### ì¥ì 

- SSG + ë°ì´í„°ê°€ ì—…ë°ì´íŠ¸ ëœë‹¤.
- SEO ìµœì í™”ê°€ ê°€ëŠ¥í•˜ë‹¤.

### ë‹¨ì 

- í•˜ì§€ë§Œ ì‹¤ì‹œê°„ ë°ì´í„°ê°€ ì•„ë‹ˆë‹¤.

## SSR : server side rendering

- ë Œë”ë§ì˜ ì£¼ì²´ : Server
- ë Œë”ë§ì˜ ê³¼ì •
  - ìœ ì €ì˜ ìš”ì²­ì„ ë°›ëŠ”ë‹¤.
  - Serverê°€ ìš”ì²­ì„ ë°›ì•„ì„œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¨ë‹¤.
  - Serverê°€ HTMLì„ ë Œë”ë§í•œë‹¤.
  - Serverê°€ ë Œë”ë§ëœ HTMLì„ ìœ ì €ì—ê²Œ ì „ë‹¬í•œë‹¤.

### ì¥ì 

- TTV, FCP ì‹œê°„ì´ ì§§ë‹¤.
- SEO ìµœì í™”ê°€ ê°€ëŠ¥í•˜ë‹¤.
- ì‹¤ì‹œê°„ ë°ì´í„°ë¥¼ ì‚¬ìš©í•œë‹¤.

### ë‹¨ì 

- SSG, ISRê³¼ ë¹„êµí–ˆì„ ë•Œ ë¹„êµì  ëŠë¦´ ìˆ˜ ìˆë‹¤
- ì„œë²„ì˜ ë¶€í•˜(Overhead)ê°€ í¬ë‹¤.
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="rendering"/>
        <category label="csr"/>
        <category label="isr"/>
        <category label="ssg"/>
        <category label="ssr"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
    <entry>
        <title type="html"><![CDATA['[ì•Œê³ ë¦¬ì¦˜]ìµœëŒ€ê³µì•½ìˆ˜ì™€ ìµœì†Œê³µë°°ìˆ˜']]></title>
        <id>2023-06-23-139-algorithm</id>
        <link href="https://nostrss.me/2023-06-23-139-algorithm"/>
        <updated>2023-06-23T00:00:00.000Z</updated>
        <content type="html"><![CDATA[

ìµœê·¼ ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œë¥¼ í’€ë‹¤ê°€ ìµœëŒ€ê³µì•½ìˆ˜ì™€ ìµœì†Œê³µë°°ìˆ˜ë¥¼ í™œìš©í•˜ëŠ” ë¬¸ì œê°€ ìˆì—ˆë‹¤.

ë¬¸ì œë¥¼ í’€ê¸´ í’€ì—ˆì§€ë§Œ, ìµœëŒ€ê³µì•½ìˆ˜ì™€ ìµœì†Œê³µë°°ìˆ˜ì˜ ê²½ìš°ì—ëŠ” ê³µì‹ì´ ì´ë¯¸ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì—

ì˜ ì•Œì•„ë‘ë©´ ì‹œê°„ì„ ì ˆì•½í•˜ê¸° ì¢‹ì„ ê²ƒ ê°™ì•„ì„œ ì •ë¦¬í•´ ë³´ì•˜ë‹¤.

## ìµœëŒ€ ê³µì•½ìˆ˜(greatest common divisor)

ìœ í´ë¦¬ë“œ í˜¸ì œë²•ì„ ì´ìš©í•˜ì—¬ ìµœëŒ€ ê³µì•½ìˆ˜ë¥¼ êµ¬í•˜ëŠ” ë°©ë²•ì„ ì½”ë“œë¡œ êµ¬í˜„í•´ ë³´ì•˜ë‹¤.

```javascript
const getGcd = (a, b) => {
  while (b > 0) {
    let temp = b;
    b = a % b;
    a = temp;
  }
  return a;
};
```

ì¬ê·€ì ìœ¼ë¡œë„ êµ¬í˜„ ê°€ëŠ¥í•  ê²ƒ ê°™ì•„ ì‘ì„±ì„ í•´ë´¤ë‹¤.

```javascript
const getGcd = (a, b) => {
  if (b === 0) {
    return a;
  }
  return getGcd(b, a % b);
};
```

## ìµœì†Œ ê³µë°°ìˆ˜(least common multiple)

ìµœì†Œ ê³µë°°ìˆ˜ëŠ” ìœ„ì˜ ìµœëŒ€ ê³µì•½ìˆ˜ë¥¼ ì´ìš©í•˜ë©´ ì‰½ê²Œ êµ¬í•  ìˆ˜ ìˆë‹¤.

```javascript
const lcm = (a, b) => {
  return (a * b) / gcd(a, b);
};
```
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="algorithm"/>
        <category label="javascript"/>
        <category label="gcd"/>
        <category label="lcm"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
    <entry>
        <title type="html"><![CDATA['[ì±…ì½ê¸°]refactoring - ì±•í„° 1']]></title>
        <id>2023-05-07-138-refactoring-1</id>
        <link href="https://nostrss.me/2023-05-07-138-refactoring-1"/>
        <updated>2023-05-07T00:00:00.000Z</updated>
        <content type="html"><![CDATA[

## ìƒ˜í”Œ ì½”ë“œ

- [ë¦¬íŒ©í† ë§ ì „ ì½”ë“œ](https://github.com/nostrss/book-refactoring/tree/ef7e94134633027ad7a61d140184751e64422a16/chapter-01)

- [ë¦¬íŒ©í† ë§ í›„ ì½”ë“œ](https://github.com/nostrss/book-refactoring/tree/main/chapter-01)

## ì±•í„° 1

ì €ìëŠ” ìê¸°ê°€ ëª…ëª…í•œ ë¦¬íŒ©í„°ë§ì˜ ê·œì¹™ê³¼ ê¸°ë²•(?)ì„ ì˜ê±°í•˜ë©° ìƒ˜í”Œ ì½”ë“œë¥¼ ë¦¬íŒ©í† ë§ì„ í•˜ëŠ” ë²•ì„ ë‹¨ê³„ë³„ë¡œ ë³´ì—¬ì¤€ë‹¤.

ì˜ˆì‹œë¥¼ í†µí•´ì„œ ë¦¬íŒ©í„°ë§ì´ ë¬´ì—‡ì¸ì§€ ê°ì„ ì¡ëŠ” ì±•í„°ì´ë‹¤. í•˜ì§€ë§Œ..

> ì•„ë‹ˆ ì±•í„°1 ë¶€í„° ì™œ ì´ë ‡ê²Œ ë³µì¡í•˜ì§€?

ë¼ëŠ” ìƒê°ì´ ë“¤ê²Œ í•œë‹¤.

ê·¸ë¦¬ê³  ëˆˆìœ¼ë¡œë§Œ ì½”ë“œë¥¼ ë³´ë‹ˆ ê´„í˜¸ê°€ ëˆˆì— ì˜ ë“¤ì–´ì˜¤ì§€ ì•Šì•„ì„œ, ë‚˜ëŠ” ì €ìì˜ ì½”ë“œë¥¼ ì§ì ‘ ì‘ì„±í•˜ë©´ì„œ ì±…ì„ ì •ë…í–ˆë‹¤.

ì±•í„°1ë§Œ ë³´ëŠ”ë° ë°˜ë‚˜ì ˆì€ ê±¸ë¦° ê²ƒ ê°™ë‹¤...

## ë¦¬íŒ©í„°ë§ ê¸°ë²•

ì €ìëŠ” ì•ìœ¼ë¡œ ë’·ì¥ì—ì„œ ë” ìì„¸íˆ ë¦¬íŒ©í„°ë§ì˜ ê¸°ë²•ì— ëŒ€í•´ì„œ ë‹¤ë£° ì˜ˆì •ì´ë¼ê³  í–ˆì§€ë§Œ, ëª‡ê°€ì§€ ì¸ìƒì ì¸ ë‚´ìš©ì´ ìˆì—ˆë‹¤.

### ë³€ìˆ˜ ì¸ë¼ì¸í•˜ê¸°

**ë¦¬íŒ©í„°ë§ ì „**

```javascript
for (let perf of invoice.performances) {
  const play = playFor(perf);
  let thisAmout = amountFor(perf, play);
}
```

**ë¦¬íŒ©í„°ë§ í›„**

```javascript
for (let perf of invoice.performances) {
  // const play = playFor(perf);
  let thisAmout = amountFor(perf, playFor(perf));
}
```

ì €ìëŠ” ìœ„ì˜ ë°©ì‹ ëŒ€ì‹  ì•„ë˜ì˜ ë°©ì‹ìœ¼ë¡œ ë¦¬íŒ©í„°ë§ì„ ì§„í–‰í•˜ë©° ì´ë¥¼ `ë³€ìˆ˜ ì¸ë¼ì¸í•˜ê¸°`ë¼ê³  ë¶€ë¥¸ë‹¤.

ë³€ìˆ˜ `play`ê°€ í•˜ë‚˜ ì œê±° ë˜ê¸°ëŠ” ì¥ì ì´ ìˆê¸´ í•œë°, ê°œì¸ì ìœ¼ë¡œëŠ” ê·¸ë™ì•ˆ ìœ„ì˜ ë°©ì‹ì´ ë³´ê¸° ì¢‹ì•„ì„œ ë§ì´ ì‚¬ìš©í–ˆë˜ ë°©ì‹ì´ì—ˆë‹¤.

ì™œ ì €ìê°€ ì´ë ‡ê²Œ ìˆ˜ì •ì„ í•˜ëŠ”ì§€ ê¶ê¸ˆí•´ì§€ëŠ” ë¶€ë¶„ì´ë‹¤.

### ì¡°ê±´ë¶€ ë¡œì§ì„ ë‹¤í˜•ì„±ìœ¼ë¡œ ë°”ê¾¸ê¸°

**ë¦¬íŒ©í„°ë§ ì „**

```javascript
function amountFor(aPerformance) {
  let result = 0;
  switch (aPerformance.play.type) {
    case 'tragedy': // ë¹„ê·¹
      result = 40000;
      if (aPerformance.audience > 30) {
        result += 1000 * (aPerformance.audience - 30);
      }
      break;
    case 'comedy': // í¬ê·¹
      result = 30000;
      if (aPerformance.audience > 20) {
        result += 10000 + 500 * (aPerformance.audience - 20);
      }
      result += 300 * aPerformance.audience;
      break;
    default:
      throw new Error(`ì•Œ ìˆ˜ ì—†ëŠ” ì¥ë¥´: ${aPerformance.play.type}`);
  }
  return result;
}
```

**ë¦¬íŒ©í„°ë§ í›„**

```javascript
class PerformanceCalculator {
  constructor(aPerformance, aPlay) {
    this.performance = aPerformance;
    this.play = aPlay;
  }

  get amount() {
    throw new Error('ì„œë¸Œí´ë˜ìŠ¤ì—ì„œ ì²˜ë¦¬í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.');
  }

  get volumeCredits() {
    return Math.max(this.performance.audience - 30, 0);
  }
}

class TragedyCalculator extends PerformanceCalculator {
  get amount() {
    let result = 40000;
    if (this.performance.audience > 30) {
      result += 1000 * (this.performance.audience - 30);
    }
    return result;
  }
}
class ComedyCalculator extends PerformanceCalculator {
  get amount() {
    let result = 30000;
    if (this.performance.audience > 20) {
      result += 10000 + 500 * (this.performance.audience - 20);
    }
    result += 300 * this.performance.audience;
    return result;
  }
  get volumeCredits() {
    return super.volumeCredits + Math.floor(this.performance.audience / 5);
  }
}
```

ì €ìëŠ” switchë¥¼ ì´ìš©í•œ ì¡°ê±´ë¶€ ë¡œì§ì„ ë‹¤í˜•ì„±(polymorphism)ì„ í™œìš©í•˜ì—¬ ìˆ˜ì •í•˜ì˜€ë‹¤.

í˜„ì—…ì—ì„œë„ ì¡°ê±´ì— ë”°ë¥¸ ë¶„ê¸°ë§ˆë‹¤ ë³„ë„ì˜ ë¡œì§ì„ ì ìš©í•´ì•¼ í•˜ëŠ”ê²½ìš°ê°€ ì•„ì£¼ ë§ë‹¤.

ê·¸ëŸ´ë•Œë©´ if else ì˜ ì§€ì˜¥ì— ë¹ ì ¸ ì—„ì²­ë‚˜ê²Œ ê¸´ ì½”ë“œë¥¼ ë´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ë§ì•˜ë‹¤.

class ë¬¸ë²•ì´ ìµìˆ™í•˜ì§€ ì•Šì€ ë‚˜ì§€ë§Œ í˜„ì‹¤ì ìœ¼ë¡œ ì•„ì£¼ ì™€ ë‹¿ëŠ” ë¦¬íŒ©í„°ë§ ë°©ë²•ì´ì—ˆë‹¤.

## í›„ê¸°

ìƒê°ë³´ë‹¤ ë‹¨ê³„ë³„ë¡œ ì„¤ëª…ì´ ì•Œì°¨ê²Œ ë˜ì–´ ìˆë‹¤. ë¬´ì–¸ê°€ ì±…ì´ ë‹¨ë‹¨í•˜ê³  ì•Œì°¬ ëŠë‚Œì´ë‹¤.

ì˜¤ë˜ ê±¸ë¦´ ê²ƒ ê°™ê¸´í•œë° ì™„ë… í•´ë³´ì ã…ã…
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="book"/>
        <category label="refactoring"/>
        <category label="javascript"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
    <entry>
        <title type="html"><![CDATA['[ì±…ì½ê¸°]refactoring']]></title>
        <id>2023-05-05-137-refactoring-0</id>
        <link href="https://nostrss.me/2023-05-05-137-refactoring-0"/>
        <updated>2023-05-05T00:00:00.000Z</updated>
        <content type="html"><![CDATA[

## ì¢‹ì€ ì½”ë“œë€ ì–´ë–¤ê±¸ê¹Œ?

íšŒì‚¬ë¥¼ ë‹¤ë‹ˆê¸° ì „ì— ì¢‹ì€ ì½”ë“œì— ëŒ€í•œ ë‚˜ì˜ ìƒê°ì€ ì•„ë˜ì™€ ê°™ì•˜ë‹¤.

> ì§§ê³  ê°„ê²°í•œ ì½”ë“œ

> ìµœì í™”ê°€ ì˜ ë˜ì–´ ìˆëŠ” ì½”ë“œ

í•˜ì§€ë§Œ íšŒì‚¬ë¥¼ ë‹¤ë‹ˆë©´ì„œ ì¶”ê°€ëœ ë‚´ìš©ì´ ìˆë‹¤.

> ì•Œì•„ë³´ê¸° ì‰¬ìš´ ì½”ë“œ

> ìœ ì§€ ë³´ìˆ˜ê°€ ì‰¬ìš´ ì½”ë“œ

> ê¸°ëŠ¥ ì¶”ê°€ê°€ ì‰¬ìš´ ì½”ë“œ

ê¸°ì¡´ì˜ ìƒê°ê³¼ëŠ” ì¡°ê¸ˆ ë‹¤ë¥¸ ë°©í–¥ì„±ì´ ìƒê²¨ ë‚œ ê²ƒì´ë‹¤.

### ì™œ?

í˜¼ì ê°œë°œì„ í•œë‹¤ë©´ ì´ëŸ° ìƒê°ì´ ë“¤ì§€ ì•Šì•˜ì„ ê²ƒ ê°™ë‹¤.

í•˜ì§€ë§Œ íšŒì‚¬ì—ì„œ ë™ë£Œë“¤ê³¼ í•¨ê»˜ ì¼ì„ í•˜ë‹¤ë³´ë‹ˆ ëˆ„êµ°ê°€ê°€ ì‘ì„±í•œ ì½”ë“œë¥¼ ë´ì•¼ í•˜ëŠ” ì¼ì´ ìì£¼ ìƒê²¼ë‹¤. ê·¸ë¦¬ê³  ë°˜ëŒ€ë¡œ ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œë¥¼ ë‹¤ë¥¸ ì‚¬ëŒì´ ìˆ˜ì •í•´ì•¼ í•˜ëŠ” ì¼ë„ ìˆì—ˆë‹¤.

ì´ë•Œ ì„œë¡œ ë‹¤ë¥¸ ìŠ¤íƒ€ì¼ì˜ ì½”ë“œë¥¼ ë³´ë©´ì„œ ë¶„ì„í•˜ëŠ”ë° ë§ì€ ì‹œê°„ì„ ë“¤ì˜€ë˜ ê¸°ì–µì´ ìˆë‹¤.

ë˜í•œ ë™ë£Œê°€ ì‘ì„±í•œ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ë‹¤ ë³´ë©´ ì˜ˆìƒì¹˜ ëª»í•œ ì‚¬ì´ë“œ ì´í™íŠ¸ê°€ ë°œìƒí•˜ëŠ” ê²½ìš°ê°€ ë°œìƒí•˜ëŠ” ì¼ë„ ë§ì•˜ë‹¤. ì—¬ê¸°ì— ì •ë§ ê°„ë‹¨í•œ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ëŠ”ë°, ì˜ˆìƒë³´ë‹¤ ìˆ˜ì •ì˜ ë²”ìœ„ê°€ ë„“ì–´ì ¸ì„œ ë‹¹í™©ìŠ¤ëŸ¬ìš´ ê²½ìš°ë„ ìˆì—ˆë‹¤.

íšŒì‚¬ì— ì‹œë‹ˆì–´ ê°œë°œìê°€ ì—†ë‹¤ ë³´ë‹ˆ ì´ì— ëŒ€í•œ ê°ˆì¦ì´ ìƒê²¨ë‚  ìˆ˜ ë°–ì— ì—†ì—ˆëŠ”ë° ë§ˆë•…í•œ í•´ê²°ë°©ë²•ì„ ì°¾ê¸° ì–´ë ¤ì› ë‹¤. chat-gpt, êµ¬ê¸€ê²€ìƒ‰, ìœ íŠœë¸Œë¥¼ ì•„ë¬´ë¦¬ ë“¤ì—¬ë´ë„ ê¹Šì´ê°€ ëŠê»´ì§€ì§€ ì•Šì•˜ê³ , ì •ë³´ë¥¼ íƒìƒ‰í•˜ëŠ” ì‹œê°„ë§Œ ê¸¸ì–´ì§€ëŠ” ëŠë‚Œì´ ë“¤ì—ˆë‹¤.

## ì±… í•œë²ˆ ì½ì–´ ë³¼ê¹Œ?

ê·¸ëŸ¬ë‹¤ íšŒì‚¬ ì—…ë¬´ ë•Œë¬¸ì— ëŒ€í‘œë‹˜ì´ ì–‡ì€ ì±… í•œ ê¶Œì„ ì½ì–´ ì˜¤ë¼ê³  í–ˆë‹¤.

[í”„ë¡œê·¸ë ˆì‹œë¸Œ ì›¹ ì•±](http://www.yes24.com/Product/UsedShopHub/Hub/92456411)

<img width="240" alt="í”„ë¡œê·¸ë ˆì‹œë¸Œ ì›¹ ì•±" src="http://image.yes24.com/Goods/92456411/XL">

ì •ë§ ì˜¤ëœ ë§Œì— ì½ëŠ” ì±…ì„ ì½ì–´ ë´¤ëŠ”ë°, ê·¸ë˜ì„œ ì¸ì§€ ëŠë‚Œì´ ë‚¨ë‹¬ëë‹¤. ìœ íŠœë¸Œë‚˜, ë¸”ë¡œê·¸ì™€ ë‹¬ë¦¬ ì‘ê°€ì˜ ë‚´ê³µì´ ëŠê»´ì¡Œë‹¤ê³  í•´ì•¼í• ê¹Œ?

ì±…ì´ ì•ì•¼ì„œ, ì•„ë‹ˆë©´ ì‘ê°€ì˜ í•„ë ¥ì´ ì¢‹ì•„ì„œ ê·¸ë¬ì„ì§€ ëª¨ë¥´ì§€ë§Œ ê·¸ ëŠë‚Œì´ ë„ˆë¬´ ì¢‹ì•˜ë‹¤.

ê·¸ë˜ì„œ ì´ë²ˆì—ëŠ” ì¡°ê¸ˆ ë” ë‘ê»ê³  ì–´ë ¤ìš´ ì±…ì„ ì½ì–´ ë³´ë ¤ê³  í•œë‹¤.

### ë¦¬íŒ©í„°ë§

[ë¦¬íŒ©í„°ë§ 2íŒ](http://www.yes24.com/Product/UsedShopHub/Hub/89649360)

<img width="240" alt="í”„ë¡œê·¸ë ˆì‹œë¸Œ ì›¹ ì•±" src="http://image.yes24.com/Goods/89649360/XL">

ì´ ì±…ì„ ì„ íƒí•œ ì´ìœ 

- ìœ íŠœë¸Œì—ì„œ ì¶”ì²œ ì˜ìƒì´ ë§ì•˜ë‹¤..
- 1íŒì˜ ê²½ìš° javaë¡œ ì˜ˆì œ ì½”ë“œê°€ ì‘ì„±ë˜ì–´ ìˆì—ˆëŠ”ë°, 2íŒì—ì„œëŠ” javascriptë¡œ ë˜ì–´ ìˆë‹¤.
- 1íŒì— ëŒ€í•œ ì¢‹ì€ í‰ê°€ ê¸€ì´ ë§ì•˜ë‹¤.

ì, ì±…ì€ ì¤€ë¹„í–ˆê³  í•œë²ˆ ì½ì–´ë³´ì.
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="book"/>
        <category label="refactoring"/>
        <category label="javascript"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
    <entry>
        <title type="html"><![CDATA['typedocìœ¼ë¡œ í”„ë¡ íŠ¸ì—”ë“œ ë¬¸ì„œ ë§Œë“¤ê¸°']]></title>
        <id>2023-03-13-136-typedoc-gh-pages</id>
        <link href="https://nostrss.me/2023-03-13-136-typedoc-gh-pages"/>
        <updated>2023-03-13T00:00:00.000Z</updated>
        <content type="html"><![CDATA[

íšŒì‚¬ì—ì„œë“ , ê°œì¸ì ìœ¼ë¡œ ì§‘ì—ì„œ ì½”ë“œë¥¼ ë³¼ ë•Œë§ˆë‹¤

> ì´ ë³€ìˆ˜ëŠ” ë­ì§€?

> ì´ í•¨ìˆ˜ëŠ” ë¬´ìŠ¨ ì‘ë™ì„ í•˜ëŠ”ê±°ì§€?

ë¼ëŠ” ìƒê°ì„ í•˜ë©´ì„œ ì½”ë“œë¥¼ ì‚´í´ë³´ê³¤ í•œë‹¤.

ê·¸ë˜ì„œ ë‹¤ìŒì— ë³¼ë•ŒëŠ” ì¢€ ë” ì•Œì•„ ë³´ê¸° ì‰½ê²Œ í•˜ë ¤ê³  ì£¼ì„ì„ ì—´ì‹¬íˆ ë‹¬ê¸°ë„ í•œë‹¤.

ê·¸ëŸ¬ë‹¤ API ëª…ì„¸ì²˜ëŸ¼ í”„ë¡ íŠ¸ ì†ŒìŠ¤ì½”ë“œë“¤ë„ ë¬¸ì„œí™” í•´ì£¼ëŠ” ë°©ë²•ì´ ì—†ì„ê¹Œ í•´ì„œ ì•Œì•„ë³´ë‹¤ê°€ typedocì„ í†µí•´ì„œ ë¬¸ì„œí™” í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì°¾ì•„ì„œ ì ìš©í•´ ë´¤ë‹¤.

## typedocì´ë€?

[typedoc ê³µì‹ í™ˆí˜ì´ì§€ ë°”ë¡œê°€ê¸°](https://typedoc.org/)

[typedoc ì˜ˆì œ](https://typedoc.org/example/)

typedocì€ ì†ŒìŠ¤ì½”ë“œì— í¬í•¨ëœ ì£¼ì„ìœ¼ë¡œ html ë¬¸ì„œë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” íŒ¨í‚¤ì§€ì´ë‹¤.

ë³„ë„ë¡œ ë¬¸ì„œë¥¼ ì‘ì„±í•˜ëŠ” ì‹œê°„ì„ ë“¤ì¼ í•„ìš”ì—†ì´ ì†ŒìŠ¤ì½”ë“œì— ì‘ì„±í•˜ë©´ ë°”ë¡œ ë¹Œë“œí•˜ì—¬ ë¬¸ì„œí™” í•  ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆë‹¤.

## typedoc ì„¤ì¹˜í•˜ê¸°

```bash
// Install

npm install --save-dev typedoc
```

## typedoc ì„¤ì •í•˜ê¸°

tsconfig.jsonì— ì•„ë˜ì™€ ê°™ì´ entryPointsë¥¼ ì§€ì •í•´ì¤˜ì•¼ í•œë‹¤.

entryPointsëŠ” TypeDocì´ ë¬¸ì„œí™”í•  TypeScript íŒŒì¼ì˜ ì§„ì…ì ì„ ì§€ì •í•˜ëŠ” ë° ì‚¬ìš©ë˜ê³ , ì§„ì…ì ì´ ì—¬ëŸ¬ ê³³ì¼ ê²½ìš°ì—ëŠ” ë°°ì—´ë¡œ ì—¬ëŸ¬ê°œ ì§€ì •í•´ì¤„ ìˆ˜ ìˆë‹¤.

outì€ ë¹Œë“œíŒŒì¼ì´ ìƒì„±ë  ê²½ë¡œì´ë‹¤.

```json
 "typedocOptions": {
    "entryPoints": ["src/pages/index.tsx"],
    "out": "docs"
  }
```

## typedoc ë¬¸ì„œ ìƒì„±í•˜ê¸°

ë¬¸ì„œë¥¼ ìƒì„±í•˜ëŠ” ëª…ë ¹ì–´ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

```bash
npx typedoc src/index.ts
```

í•˜ì§€ë§Œ, ìœ„ì™€ ê°™ì´ ì‘ì„±í•˜ë©´ í•˜ìœ„ì— ìˆëŠ” ì†ŒìŠ¤ì½”ë“œ íŒŒì¼ì˜ ì£¼ì„ë“¤ì€ ë¬¸ì„œë¡œ ë§Œë“¤ì–´ì§€ì§€ ì•ŠëŠ” ë‹¨ì ì´ ìˆì—ˆë‹¤.

ê·¸ë˜ì„œ ì°¾ì€ ë°©ë²•ì´ ì•„ë˜ì˜ ëª…ë ¹ì–´ì´ë‹¤. ì´ë ‡ê²Œ ì…ë ¥í•˜ë©´, entrypointsë¶€í„° ì‹œì‘í•˜ì—¬ í•˜ìœ„ í´ë”ì˜ íŒŒì¼ë“¤ê¹Œì§€ ì „ë¶€ ë¬¸ì„œë¡œ ë§Œë“¤ì–´ ì¤€ë‹¤.

```bash
npx typedoc --entryPointStrategy expand ./src
```

## ê²°ê³¼ë¬¼

ë‚˜ ê°™ì€ ê²½ìš° ë¹Œë“œëœ ë¬¸ì„œë¥¼ ì–¸ì œë“ ì§€ ì›¹ì—ì„œ ë³¼ ìˆ˜ ìˆë„ë¡ gh-pagesë¥¼ ì´ìš©í•´ git-hub pageì— ë°°í¬ë¥¼ í•´ë‘ì—ˆë‹¤.

[typedoc ìœ¼ë¡œ ìƒì„±í•œ ë¬¸ì„œ ë³´ê¸°](https://nostrss.github.io/nextjs-blog/)
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="react"/>
        <category label="nextjs"/>
        <category label="typedoc"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
    <entry>
        <title type="html"><![CDATA['ë‚˜ë§Œì˜ Boilerplateë¥¼ github templateë¡œ ë§Œë“¤ê¸° ']]></title>
        <id>2023-03-12-135-github-template</id>
        <link href="https://nostrss.me/2023-03-12-135-github-template"/>
        <updated>2023-03-12T00:00:00.000Z</updated>
        <content type="html"><![CDATA[

ë§¤ë²ˆ ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•  ë•Œ ë§ˆë‹¤ ë˜‘ê°™ì´ ë°˜ë³µí•´ì„œ ì‘ì—…í•˜ëŠ” ì¼ì´ ìˆë‹¤.

```bash
// ì„¤ì¹˜í•˜ê¸°..
npx create-react-app
npx create-next-app
npx eslint init
(ë“±ë“±ë“±)

// ì„¤ì •í•˜ê¸°
package.json
tsconfig.json
.eslintrc.js
.gitignore
next.config.js
(ë“±ë“±ë“±)
```

ì´ë ‡ê²Œ setting í•˜ëŠ” ê²ƒë„ ì‚¬ì‹¤ í•œ ë²ˆì— ì˜ ë˜ì§€ ì•Šìœ¼ë©´ ìƒë‹¹íˆ ì‹œê°„ì„ ì†Œëª¨í•˜ëŠ” ì‘ì—…ì´ ë˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤. (ë°”ë¡œ ì˜¤ëŠ˜ ë‚´ê°€ ê·¸ë¬ë‹¤..)

ê·¸ë˜ì„œ ë‚˜ë§Œì˜ boilerplateë¥¼ ë§Œë“¤ì–´ì„œ git-hubì— í…œí”Œë¦¿ìœ¼ë¡œ ë§Œë“¤ì–´ë‘ê³  ì‚¬ìš©í•´ë³´ë ¤ê³  í•œë‹¤.

## Boilerplate ì¤€ë¹„í•˜ê¸°

> boilerplateëŠ” ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì½”ë“œì™€ íŒŒì¼ë“¤ì˜ ì§‘í•©ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, React í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•  ë•Œë§ˆë‹¤ ê°™ì€ íŒŒì¼ë“¤ì„ ë§Œë“¤ì–´ì•¼ í•œë‹¤ë©´, ì´ íŒŒì¼ë“¤ì„ boilerplateì— ì¶”ê°€í•˜ì—¬ ë‹¤ìŒì— í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•  ë•Œ boilerplateë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ boilerplateë¥¼ ì‚¬ìš©í•˜ë©´ ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•  ë•Œ ì‹œê°„ì„ ì ˆì•½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‚´ê°€ ë§Œë“¤ Boilerplate ë‚´ìš©ì€ ì•„ë˜ì™€ ê°™ë‹¤

- Next.js
- typescript
- eslint : airbnb
- prettier

ìµœì†Œí•œì˜ ì„¸íŒ… ë‚´ìš©ì´ë‹¤.

css, ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë“±ë“±ì€ ìƒí™©ì„ ë³´ë©´ì„œ ì¶”ê°€í•  ì˜ˆì •ì´ë‹¤.

ì¤€ë¹„ê°€ ëœ ì½”ë“œëŠ” githubì— í‘¸ì‰¬í•´ ë‘ì.

[Boilerplate ì†ŒìŠ¤ì½”ë“œ ë³´ëŸ¬ê°€ê¸°](https://github.com/nostrss/next-lint-airbnb)

## Github Template Repository ì„¤ì •í•˜ê¸°

- Repository > setting

<img width="896" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-03-12 á„‹á…©á„’á…® 3 29 52" src="https://user-images.githubusercontent.com/56717167/224528416-52760c3d-5bbc-48b7-a621-5895b33d5645.png">

- Template Repository ì²´í¬ë°•ìŠ¤ On

<img width="896" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-03-12 á„‹á…©á„’á…® 3 31 51" src="https://user-images.githubusercontent.com/56717167/224528454-ee44b6d9-6130-4c74-b9a5-c00e8bf42405.png">

ì´ê²Œ ëì´ë‹¤. ì•ìœ¼ë¡œ ì´ Repositoryë¥¼ Templateë¡œ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

## Template ì‚¬ìš©í•˜ê¸°

ìƒˆë¡œìš´ Repositoryë¥¼ ìƒì„±í•´ë³´ì.

ê·¸ë•Œ select boxë¥¼ í´ë¦­ í•´ë³´ë©´, ë°©ê¸ˆ ì„¤ì •í•œ Template Repositoryê°€ ì˜µì…˜ìœ¼ë¡œ ë‚˜ì˜¤ê²Œ ëœë‹¤.

<img width="896" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-03-12 á„‹á…©á„’á…® 3 34 34" src="https://user-images.githubusercontent.com/56717167/224528579-56d922bb-ecbe-489e-bf96-05adf896b723.png">

ì˜µì…˜ì„ ì„ íƒí•˜ê³  Repositoryë¥¼ ë§Œë“¤ê²Œ ë˜ë©´ ë˜‘ê°™ì€ Repositoryê°€ ìƒì„±ì´ ë˜ê³  ë°”ë¡œ ì´ì–´ì„œ ì¶”ê°€ ì„¤ì • ë° ì‘ì—…ì„ ì‹œì‘ í•˜ë©´ ëœë‹¤.

## forkì™€ì˜ ì°¨ì´ì 

Repolistoryë¥¼ forkí•´ì„œ ê·¸ëƒ¥ ì‚¬ìš©í•˜ëŠ” ê²ƒê³¼ ì°¨ì´ê°€ ì—†ê²Œ ëŠê»´ì§ˆ ìˆ˜ ìˆëŠ”ë°, ëª‡ê°€ì§€ ë‹¤ë¥¸ ì ì´ ìˆë‹¤.

- ìƒˆ í¬í¬ì—ëŠ” ë¶€ëª¨ ë¦¬í¬ì§€í† ë¦¬ì˜ ì „ì²´ ì»¤ë°‹ ê¸°ë¡ì´ í¬í•¨ë˜ë©° í…œí”Œë¦¿ì—ì„œ ë§Œë“  ë¦¬í¬ì§€í† ë¦¬ëŠ” ë‹¨ì¼ ì»¤ë°‹ìœ¼ë¡œ ì‹œì‘í•©ë‹ˆë‹¤.
- í¬í¬ì— ëŒ€í•œ ì»¤ë°‹ì€ ê¸°ì—¬ ê·¸ë˜í”„ì— í‘œì‹œë˜ì§€ ì•Šì§€ë§Œ í…œí”Œë¦¿ì—ì„œ ë§Œë“  ë¦¬í¬ì§€í† ë¦¬ì— ëŒ€í•œ ì»¤ë°‹ì€ ê¸°ì—¬ ê·¸ë˜í”„ì— í‘œì‹œë©ë‹ˆë‹¤.
- í¬í¬ëŠ” í…œí”Œë¦¿ì—ì„œ ë¦¬í¬ì§€í† ë¦¬ë¥¼ ë§Œë“¤ë©´ ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ë¹ ë¥´ê²Œ ì‹œì‘í•˜ëŠ” ë™ì‹œì— ê¸°ì¡´ í”„ë¡œì íŠ¸ì— ì½”ë“œë¥¼ ê¸°ì—¬í•˜ëŠ” ì„ì‹œ ë°©ë²•ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

[ìì„¸í•œ ë‚´ìš©ë³´ëŸ¬ê°€ê¸°](https://docs.github.com/ko/repositories/creating-and-managing-repositories/creating-a-repository-from-a-template)
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="github"/>
        <category label="template"/>
        <category label="boilerplate"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
    <entry>
        <title type="html"><![CDATA['Next.js SSR, SSGë¥¼ Vercelì— ë°°í¬í•˜ê¸°(3)']]></title>
        <id>2023-03-11-134-nextjs-vercel-3</id>
        <link href="https://nostrss.me/2023-03-11-134-nextjs-vercel-3"/>
        <updated>2023-03-11T00:00:00.000Z</updated>
        <content type="html"><![CDATA[

[ì „ì²´ ì†ŒìŠ¤ì½”ë“œ](https://github.com/nostrss/next-render)

[DEMO](https://next-render-hjuyogs9h-nostrss.vercel.app/)

ì´ì œ ì†ŒìŠ¤ì½”ë“œë¥¼ `vercel`ì— ë°°í¬í•´ ë³¼ ì°¨ë¡€ì´ë‹¤.

ë¨¼ì € ì§€ê¸ˆê¹Œì§€ì˜ ì†ŒìŠ¤ì½”ë“œë¥¼ Git-hubì— `Push` í•´ë‘ë„ë¡ í•˜ì.

## Vercel íšŒì›ê°€ì…

[Vercel ë°”ë¡œê°€ê¸°](https://vercel.com/)

## Git-hub ê³„ì • ì—°ê²°, Repository ì—°ê²°í•˜ê¸°

ë¨¼ì € ìì‹ ì˜ Git-Hub ê³„ì •ì„ ì—°ê²°,ì„ íƒ í•´ì¤€ë‹¤.

ê·¸ëŸ¬ë©´ ì•„ë˜ì™€ ê°™ì´ Git-hubì— ìˆëŠ” ë‚˜ì˜ Repositoryë“¤ì´ ì­‰ ë‚˜ì˜¤ê²Œ ëœë‹¤.

<img width="719" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-03-11 á„‰á…µá„€á…¡á†«: 17 01 41" src="https://user-images.githubusercontent.com/56717167/224472922-42ca6284-e54d-49aa-bc65-a4994734769c.png">

ê·¸ ì¤‘ì— ë°°í¬í•˜ê³ ì í•˜ëŠ” Repositoryë¥¼ ì„ íƒ, import í•´ë³´ì.

### Repositoryê°€ ë³´ì´ì§€ ì•ŠëŠ” ê²½ìš°

ê¹ƒí—ˆë¸Œì—ì„œ Vercel Application ì„¤ì •ì„ í™•ì¸í•´ë³´ì

- Github > setting > applications > Configure

<img width="1130" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-03-11 á„‰á…µá„€á…¡á†«: 17 10 45" src="https://user-images.githubusercontent.com/56717167/224473134-2e92f816-a6a7-4c3a-a6fc-1cab6946d03d.png">

ë‚˜ ê°™ì€ ê²½ìš°ì—ëŠ” ì—¬ê¸°ì„œ `All Repositories`ì— ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ í—ˆìš©í•˜ë‹ˆ í•´ê²°ì´ ë˜ì—ˆë‹¤.

<img width="817" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-03-11 á„‰á…µá„€á…¡á†«: 17 12 12" src="https://user-images.githubusercontent.com/56717167/224473168-2ba0fee4-e912-47b0-9252-ee2aa1a792ea.png">

## Build & Deploy

ìœ„ì™€ ê°™ì´ ì„¤ì •ì„ í•˜ë©´ í™”ë©´ì´ ë°”ë€Œë©´ì„œ ìë™ìœ¼ë¡œ ë°°í¬ê°€ ì§„í–‰ë˜ê¸° ì‹œì‘í•œë‹¤.

ë°°í¬ê°€ ì™„ë£Œë˜ë©´ ì•„ë˜ ì‚¬ì§„ê³¼ ê°™ì´ ê²°ê³¼ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.

<img width="1259" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-03-11 á„‰á…µá„€á…¡á†«: 16 56 34" src="https://user-images.githubusercontent.com/56717167/224473392-592499ba-d9a2-4c01-a2c3-9474b31db0fe.png">

ë°°í¬ ê²°ê³¼ë¥¼ ë³¼ìˆ˜ ìˆëŠ” url, ì—°ê²°ëœ branch ë“±ì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.

ë‚˜ ê°™ì€ ê²½ìš°ì—ëŠ” í˜„ì¬ main ë¸Œëœì¹˜ë¥¼ ì—°ê²°í•´ ë‘ì—ˆë‹¤.

## í›„ì† ë°°í¬

Vercelì— ì—°ê²°ë˜ì–´ ìˆëŠ” branchì— ì†ŒìŠ¤ì½”ë“œê°€ í‘¸ì‰¬ë˜ëŠ” ìˆœê°„ vercelì—ì„œ ìë™ìœ¼ë¡œ ë¹Œë“œí•˜ì—¬ ë°°í¬ê°€ ì§„í–‰ëœë‹¤.

ë³„ë„ë¡œ ì‚¬ìš©ìê°€ npm run build ì™€ ê°™ì€ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ë‹¤.

í„°ë¯¸ë„ì—ì„œ ë¹Œë“œ ì˜¤ë¥˜ê°€ ë‚˜ë“¯ vercelì—ì„œë„ ë¹Œë“œ ì˜¤ë¥˜ê°€ ë°œìƒ í•˜ë©´ ë°°í¬ê°€ ì§„í–‰ë˜ì§€ ì•Šìœ¼ë‹ˆ, ì½”ë“œë¥¼ push í•˜ê³  buildì™€ ë°°í¬ê°€ ëê¹Œì§€ ì™„ë£Œ ë˜ì—ˆëŠ”ì§€ í™•ì¸ í•  í•„ìš”ê°€ ìˆë‹¤.
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="Next"/>
        <category label="ssr"/>
        <category label="ssg"/>
        <category label="vercel"/>
        <category label="deploy"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
    <entry>
        <title type="html"><![CDATA['Next.js SSR, SSGë¥¼ Vercelì— ë°°í¬í•˜ê¸°(2)']]></title>
        <id>2023-03-05-133-nextjs-vercel-2</id>
        <link href="https://nostrss.me/2023-03-05-133-nextjs-vercel-2"/>
        <updated>2023-03-05T00:00:00.000Z</updated>
        <content type="html"><![CDATA[

[ì „ì²´ ì†ŒìŠ¤ì½”ë“œ](https://github.com/nostrss/next-render)

[DEMO](https://next-render-hjuyogs9h-nostrss.vercel.app/)

ì‘í’ˆ ë¦¬ìŠ¤íŠ¸ë¥¼ `SSR`ë¡œ êµ¬í˜„í•´ë´¤ìœ¼ë‹ˆ, ì´ë²ˆì—ëŠ” `SSG`ë¥¼ êµ¬í˜„í•´ë³´ë ¤ê³  í•œë‹¤.

ë¦¬ìŠ¤íŠ¸ ì¤‘ì— í•˜ë‚˜ë¥¼ í´ë¦­ í–ˆì„ ë•Œ ìƒì„¸ í™”ë©´ìœ¼ë¡œ ë„˜ì–´ê°€ê³ 

ìƒì„¸í™”ë©´ì€ `SSG`ë¡œ ë Œë”ë§ ë˜ë„ë¡ í•  ì˜ˆì •ì´ë‹¤.

## ì‘í’ˆ ìƒì„¸ í˜ì´ì§€ SSG êµ¬í˜„

### API

> ì‚¬ìš©í•  API : [Art Institute of Chicago API](https://api.artic.edu/docs/)

### SSG êµ¬í˜„ ì½”ë“œ

> [SSGë¡œ êµ¬í˜„ëœ ì „ì²´ ì†ŒìŠ¤ì½”ë“œ](https://github.com/nostrss/next-render/blob/main/src/pages/%5Bid%5D/index.jsx)

## êµ¬í˜„ ë‚´ìš©

### getStaticProps

[getStaticProps ë¬¸ì„œ ë³´ëŸ¬ê°€ê¸°](https://nextjs.org/docs/basic-features/data-fetching/get-static-props)

- `getStaticProps`ëŠ” ë¹Œë“œ ì‹œ api í†µì‹  ì‘ë‹µê°’ì„ ë°›ì•„ ë¯¸ë¦¬ html íŒŒì¼ì„ ìƒì„±í•´ë‘”ë‹¤.
- ì¦‰, ìš´ì˜ì— ë°°í¬ ë˜ë©´ ìœ ì €ëŠ” ë°±ì—”ë“œ ì„œë²„ì™€ì˜ í†µì‹  ê²°ê³¼ë¬¼ì„ ë³´ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì´ë¯¸ ë¹Œë“œë˜ì–´ ìˆëŠ” `html` ì •ì íŒŒì¼ì„ ë¸Œë¼ìš°ì €ë¡œ ë‹¤ìš´ ë°›ì•„ ë³´ëŠ” ê²ƒì´ë‹¤
- ë”°ë¼ì„œ ë¹Œë“œì‹œ api í†µì‹ ì´ ì„±ê³µí•˜ì§€ ì•Šìœ¼ë©´ ë‹¹ì—°íˆ ë¹Œë“œ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.
- ê·¸ë¦¬ê³  í•´ë‹¹ í˜ì´ì§€ ì ‘ì† ì‹œ ë¡œë”©ì´ ì—„ì²­ë‚˜ê²Œ ë¹ ë¥´ë‹¤.(ë‹¹ì—°íˆ ì´ë¯¸ ë Œë”ë§ë˜ì–´ ìˆì—ˆìœ¼ë‹ˆê¹..)
- ë˜ ë‹¹ì—°í•˜ì§€ë§Œ í˜ì´ì§€ ì†ŒìŠ¤ë¥¼ ë³´ë©´ apiì‘ë‹µ ê°’ë“¤ì´ ì´ë¯¸ ì±„ì›Œì ¸ ìˆë‹¤.

```javascript
export async function getStaticProps(context) {
  const id = context.params.id;
  const apiUrl = `https://api.artic.edu/api/v1/artworks/${id}`;
  const res = await fetch(apiUrl);
  const data = await res.json();
  return {
    props: {
      detailData: data.data,
    },
  };
}
```

ìœ„ì˜ ì½”ë“œëŠ” ë¹Œë“œ ì‹œ api í†µì‹  ì‘ë‹µê°’ì„ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì— propsë¡œ ì „ë‹¬í•˜ëŠ” ì—­í• ì„ í•œë‹¤.

`SSR`ê³¼ ë‹¤ë¥¸ ì ì€ ì´ê²ƒì´ `ë¹Œë“œ(build)`ì‹œ ì´ë£¨ì–´ì§„ë‹¤ëŠ” ê²ƒì´ë‹¤.

`npm run build` ë˜ëŠ” `yarn build` ì»¤ë§¨ë“œë¥¼ ì…ë ¥í•˜ëŠ” ìˆœê°„ ì´ë¯¸ í˜ì´ì§€ê°€ ë§Œë“¤ì–´ì§€ëŠ” ê²ƒì´ë‹¤.

í•˜ì§€ë§Œ ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œì—ì„œëŠ” ìœ„ì™€ ê°™ì´ ì‘ì„±í•˜ë©´ ì—ëŸ¬ê°€ ë°œìƒí•˜ì˜€ë‹¤.

ì´ìœ ëŠ” getStaticPropsê°€ `dynamic routing`í˜ì´ì§€ëŠ” ë Œë”ë§ í•˜ì§€ ëª»í•˜ê¸° ë•Œë¬¸ì´ë‹¤.

ì´ ë•Œ í•„ìš”í•œ ê²ƒì´ `getStaticPaths`ì´ë‹¤.

### getStaticPaths

[getStaticPaths ë¬¸ì„œ ë³´ëŸ¬ê°€ê¸°](https://nextjs.org/docs/basic-features/data-fetching/get-static-paths)

- `getStaticPaths`ëŠ” `dynamic routing`ìœ¼ë¡œ ë™ì ìœ¼ë¡œ ë³€í•˜ëŠ” path ì •ë³´ë¥¼ `getStaticProps`ì— ì „ë‹¬í•˜ëŠ” ì—­í• ì„ í•œë‹¤.
- ì´ path ì •ë³´ë¡œ `getStaticProps`ëŠ” ë¹Œë“œ ì‹œ apië¥¼ í˜¸ì¶œí•˜ê³  ì‘ë‹µê°’ì„ ë°›ì•„ ì •ì ì¸ í˜ì´ì§€ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ë‹¤.

```javascript
export async function getStaticPaths() {
  return {
    paths: [
      { params: { id: '14556' } },
      { params: { id: '11434' } },
      { params: { id: '16487' } },
    ],
    fallback: true,
  };
}
```

ìœ„ì˜ ì½”ë“œë¥¼ ë³´ë©´ id 3ê°œë¥¼(14556, 11434, 16487) path ì •ë³´ë¡œ `getStaticProps`ì— ì „ë‹¬í•˜ê³  ìˆë‹¤.
ê·¸ë ‡ë‹¤ë©´ ë¹Œë“œ ì‹œ `getStaticProps`ëŠ” 3ê°œì˜ idë¡œ api í†µì‹ ì„ í•˜ê³  ì‘ë‹µê°’ì„ ë°›ì•„ ì •ì ì¸ í˜ì´ì§€ë¥¼ ìƒì„±í•  ê²ƒì´ë‹¤.

ë¹Œë“œë¥¼ í•´ë³´ì.

<img width="653" alt="ë¹Œë“œê²°ê³¼" src="https://user-images.githubusercontent.com/56717167/223434906-0b966c54-52b2-4203-8dce-d04545523d62.png">

ì •ì  í˜ì´ì§€ 3ê°œê°€ ë¹Œë“œ ë˜ì—ˆë‹¤ê³  ë¹Œë“œ ê²°ê³¼ì—ì„œ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.

ì‹¤ì œ ë¹Œë“œ í´ë”ì—ì„œ í™•ì¸í•´ë³´ì.

<img width="311" alt="ë¹Œë“œê²°ê³¼" src="https://user-images.githubusercontent.com/56717167/223431594-d1ab3bdb-9b3d-4e44-b23f-e115ee450e5f.png">

ë¹Œë“œ í´ë”ì— ë‚´ê°€ ì§€ì •í•œ 14556, 11434, 16487 html íŒŒì¼ì´ ìƒì„±ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆì—ˆë‹¤.

ê·¸ë ‡ë‹¤ë©´ ì—¬ê¸°ì„œ ë˜ ë‹¤ë¥¸ ì˜ë¬¸ì´ ìƒê¸°ê²Œ ëœë‹¤...

> ì‘í’ˆì˜ ê°œìˆ˜ê°€ 100ê°œë¼ë©´, getStaticPathsì— 100ê°œì˜ ì •ë³´ë¥¼ ì…ë ¥í•´ì•¼ í•˜ëŠ”ê±´ê°€?

#### fallback(Generating paths on-demand)

ë‹¤ì‹œ í•œë²ˆ `getStaticPaths` ì½”ë“œë¥¼ ì‚´í´ë³´ì.

```javascript
    fallback: true, // ì´ê±´ ë¬´ì—‡ì„ í•˜ëŠ” ê±¸ê¹Œ??
```

`Next.js`ì—ì„œëŠ” ìš°ë¦¬ì˜ ì´ëŸ° ìš”êµ¬ë¥¼ ì˜ˆìƒí•œë“¯ ì´ë¯¸ ì¤€ë¹„ë¥¼ í•´ë‘ì—ˆëŠ”ë°, ë°”ë¡œ `fallback`ì„ ì´ìš©í•˜ëŠ” ê²ƒì´ë‹¤.

ëª¨ë“  í˜ì´ì§€ë¥¼ ì „ë¶€ ë¹Œë“œí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ í•„ìš”í•  ë•Œ ë§ˆë‹¤ ì •ì  í˜ì´ì§€ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ë‹¤.

ìœ„ì˜ ì½”ë“œë¥¼ ë‹¤ì‹œ í’€ì–´ì„œ ì„¤ëª…í•˜ë©´

> id 3ê°œëŠ” ë¯¸ë¦¬ í˜ì´ì§€ë¥¼ ì •ì  ìƒì„±í•˜ê³ 

> ë‚˜ë¨¸ì§€ dynamic routing í˜ì´ì§€ëŠ” ìœ ì €ê°€ ì ‘ì†í•˜ë©´ ê·¸ë•Œ ê·¸ë•Œ í˜ì´ì§€ë¥¼ ìƒì„±í•´ì¤˜

ë¼ëŠ” ì˜ë¯¸ë¡œ ì´í•´í•˜ë©´ ëœë‹¤.

ì—¬ê¸°ì„œ `fallback:true`ëŠ” í•„ìš”í•  ë•Œë§ˆë‹¤ ì •ì  í˜ì´ì§€ë¥¼ ìƒì„±í•œë‹¤ë¼ëŠ” ì˜µì…˜ì¸ ê²ƒì´ë‹¤.

ì‹¤ì œë¡œ ìƒì„± ë˜ëŠ” ì§€ í™•ì¸ í•´ë³´ì.

ë¹Œë“œ í›„ `Production` ëª¨ë“œë¡œ ì‹¤í–‰ì„ í•˜ì

> yarn build

> yarn start

ê·¸ë¦¬ê³  ëª‡ëª‡ í˜ì´ì§€ë¥¼ ë°©ë¬¸í•´ë´¤ë‹¤.

<img width="285" alt="falbackì„¤ì •í›„" src="https://user-images.githubusercontent.com/56717167/223436734-fc917c7d-0082-40a5-a5fb-40a0bb9ceba5.png">

ë‚´ê°€ ì§€ì •í•œ 3ê°œì˜ idì™¸ 2ê°œì˜ í˜ì´ì§€ê°€ ìƒˆë¡­ê²Œ ìƒê²¨ë‚œ ê²ƒì„ ë³¼ ìˆ˜ ìˆì—ˆë‹¤.

ì‹ ê¸°í•œ ê¸°ëŠ¥ì´ê¸´ í•œë° ëª‡ê°€ì§€ ì˜ë¬¸ì ì´ ë“¤ì—ˆë‹¤.

> ì„œë¹„ìŠ¤ë¥¼ ìš´ì˜í•˜ë‹¤ ë³´ë‹ˆ ì•½ 10,000ê°œì˜ ì •ì  í˜ì´ì§€ë“¤ì´ ìƒê²¼ë‹¤.

> ìš©ëŸ‰ì ìœ¼ë¡œ ë¬¸ì œëŠ” ì—†ëŠ” ê±´ê°€?

> ë§Œì•½ ìƒˆë¡­ê²Œ buildë¥¼ í•˜ê²Œ ë˜ëŠ” ê²½ìš° ê¸°ì¡´ì— ìŒ“ì—¬ìˆë˜ ì •ì  í˜ì´ì§€ë“¤ì€ ì „ë¶€ ì‚¬ë¼ì§€ëŠ” ê±´ê°€?

ì‹¤ë¬´ì—ì„œëŠ” SSGë¥¼ ì–´ë–»ê²Œ ì“°ê³  ìˆì„ê¹Œ..
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="Next"/>
        <category label="ssr"/>
        <category label="ssg"/>
        <category label="vercel"/>
        <category label="deploy"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
    <entry>
        <title type="html"><![CDATA['Next.js SSR, SSGë¥¼ Vercelì— ë°°í¬í•˜ê¸°(1)']]></title>
        <id>2023-03-05-132-nextjs-vercel</id>
        <link href="https://nostrss.me/2023-03-05-132-nextjs-vercel"/>
        <updated>2023-03-05T00:00:00.000Z</updated>
        <content type="html"><![CDATA[

[ì „ì²´ ì†ŒìŠ¤ì½”ë“œ](https://github.com/nostrss/next-render)

[DEMO](https://next-render-hjuyogs9h-nostrss.vercel.app/)

ìµœê·¼ ê³µë¶€ì˜ ëª©ì ì— ëŒ€í•´ ê°ˆíŒ¡ì§ˆíŒ¡í•˜ë‹¤ê°€ renderingì— ëŒ€í•´ ë¶€ì© ê´€ì‹¬ì´ ìƒê²¼ë‹¤.

ê·¸ë˜ì„œ ê³µë¶€í•  ê²¸ Next.jsì˜ SSR(server siede rendering)ê³¼ SSG ë Œë”ë§ì„ ê°„ë‹¨íˆ êµ¬í˜„í•´ì„œ ë°°í¬ë¥¼ í•´ë´¤ë‹¤.

## í”„ë¡œì íŠ¸ ì¤€ë¹„í•˜ê¸°

### API

ë¨¼ì € ë Œë”ë§í•  ë°ì´í„°ë¥¼ fetchí•  apiê°€ í•„ìš”í–ˆë‹¤.

ìµœëŒ€í•œ ê°„ë‹¨íˆ êµ¬í˜„í•˜ê³  ì‹¶ì–´ì„œ auth,corsë¥¼ ì‹ ê²½ ì“¸ í•„ìš” ì—†ëŠ” apië¥¼ í•˜ë‚˜ ì°¾ì•˜ë‹¤.

> ì‚¬ìš©í•  API : [Art Institute of Chicago API](https://api.artic.edu/docs/)

### êµ¬í˜„í•  í˜ì´ì§€

- ì‘í’ˆ ë¦¬ìŠ¤íŠ¸ í˜ì´ì§€ : SSR
- ì‘í’ˆ ìƒì„¸ í˜ì´ì§€ : SSG

ì´ë ‡ê²Œ 2ê°œì˜ í˜ì´ì§€ë§Œ ìˆìœ¼ë©´ ë  ë“¯ í•˜ë‹¤.

í˜ì´ì§€ 1ê°œëŠ” SSR, ë‹¤ë¥¸ ë‚˜ë¨¸ì§€ í˜ì´ì§€ëŠ” SSGë¡œ êµ¬í˜„í•´ë³¼ ìƒê°ì´ë‹¤.

## ì‘í’ˆ ë¦¬ìŠ¤íŠ¸ í˜ì´ì§€ SSR êµ¬í˜„

> [SSRë¡œ êµ¬í˜„ëœ ì „ì²´ ì†ŒìŠ¤ì½”ë“œ](https://github.com/>nostrss/next-render/blob/main/src/pages/index.js)

### SSR êµ¬í˜„ ì „ ì½”ë“œ

```javascript
import Head from 'next/head';
import { useEffect, useState } from 'react';
import { useRouter } from 'next/router';

export default function Home() {
  const router = useRouter();
  const [dataList, setDataList] = useState([]);

  useEffect(() => {
    fetch(`https://api.artic.edu/api/v1/artworks?limit=20`)
      .then((res) => res.json())
      .then((data) => {
        setDataList([...data.data]);
      });
  }, []);

  const onClickItem = (id) => () => {
    router.push(`/${id}`);
  };

  return (
    <>
      {dataList === undefined ? (
        <div>loading...</div>
      ) : (
        <>
          <Head>
            <title>Next.js Rendering Test</title>
            <meta
              name='description'
              content='Next Server Sider Rendering Page'
            />
            <meta
              name='viewport'
              content='width=device-width, initial-scale=1'
            />
            <link rel='icon' href='/favicon.ico' />
          </Head>
          <main>
            <h1>This page is implemented with SSR</h1>
            {dataList?.map((item) => (
              <fieldset
                key={item.id}
                onClick={onClickItem(item.id)}
                style={{ cursor: 'pointer' }}
              >
                <legend>Artwork {item.id}</legend>
                <ul>
                  <li>title : {item.title}</li>
                </ul>
              </fieldset>
            ))}
          </main>
        </>
      )}
    </>
  );
}
```

ìœ„ ì½”ë“œì˜ ê³¼ì •ì„ ê°„ë‹¨íˆ ì„¤ëª…í•˜ë©´ ì•„ë˜ì™€ ê°™ë‹¤

> - useEffectë¡œ í˜ì´ì§€ê°€ ìµœì´ˆ ë¡œë”© ë  ë•Œ ì‘í’ˆ ë¦¬ìŠ¤íŠ¸ apië¥¼ í˜¸ì¶œ í•œë‹¤.
> - ì‘ë‹µê°’ì„ useStateë¡œ dataListì— ì €ì¥í•œë‹¤.
> - dataListì˜ ì‘í’ˆ ë¦¬ìŠ¤íŠ¸ë¥¼ ë³´ì—¬ì¤€ë‹¤

ì´ ì½”ë“œë¥¼ SSRë¡œ ë Œë”ë§í•˜ê¸° ìœ„í•´ ì•„ë˜ì™€ ê°™ì´ ë³€ê²½ í–ˆë‹¤.

- useEffectë¡œ í˜ì´ì§€ê°€ ìµœì´ˆ ë¡œë”© ë  ë•Œ ì‘í’ˆ ë¦¬ìŠ¤íŠ¸ apië¥¼ í˜¸ì¶œ í•œë‹¤.

  > getServerSidePropsë¡œ ì„œë²„ì—ì„œ apië¥¼ í˜¸ì¶œí•œë‹¤.

- ì‘ë‹µê°’ì„ useStateë¡œ dataListì— ì €ì¥í•œë‹¤.
  > ì‘ë‹µê°’ì„ propsë¡œ ì „ë‹¬í•œë‹¤.

```javascript
export async function getServerSideProps() {
  // useEffectê°€ ì•„ë‹ˆë¼ ì„œë²„ì—ì„œ apië¥¼ í˜¸ì¶œí•œë‹¤.
  const res = await fetch(`https://api.artic.edu/api/v1/artworks?limit=20`);
  const data = await res.json();

  // Propsë¡œ ì‘ë‹µê°’ì„ ì „ë‹¬í•œë‹¤.
  return {
    props: {
      dataList: data.data,
    },
  };
}
```

```javascript
// ì„œë²„ì—ì„œ propsë¡œ api ì‘ë‹µê°’ì„ ì „ë‹¬ ë°›ëŠ”ë‹¤.
export default function Home({ dataList }) {
(...ìƒëµ)
```

## SSR í™•ì¸í•˜ê¸°

í˜ì´ì§€ì˜ ì™¸ê´€ë§Œ ë³´ë©´ SSRì„ ì ìš©í•˜ê¸° ì „ê³¼ ë™ì¼í•˜ê²Œ ë³´ì´ê¸° ë•Œë¬¸ì— ì œëŒ€ë¡œ ì ìš©ì´ ëœê±´ì§€ ì•Œ ìˆ˜ê°€ ì—†ë‹¤.

ì´ëŸ´ ë• ë¸Œë¼ìš°ì €ì—ì„œ cmd + opt + u(ìœˆë„ìš° ctrl + u)ë¥¼ ëˆŒëŸ¬ë³´ì.

(ë˜ëŠ” ë§ˆìš°ìŠ¤ ìš°í´ë¦­ > í˜ì´ì§€ ì†ŒìŠ¤ ë³´ê¸°)

SSRì„ ì ìš©í•˜ê¸° ì „ê³¼ í›„ì˜ ì°¨ì´ì ì´ ë³´ì´ëŠ”ê°€?

> SSR ì ìš© ì „

<img width="956" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-03-06 á„‰á…µá„€á…¡á†«: 22 57 20" src="https://user-images.githubusercontent.com/56717167/223130866-9d953e25-3e92-4ae9-af2d-534dcc16495e.png">

SSRì„ ì ìš©í•˜ê¸° ì „ì—ëŠ” api ì‘ë‹µìœ¼ë¡œ ë°›ì€ ì‘í’ˆ ë¦¬ìŠ¤íŠ¸ì˜ ë‚´ìš©ì´ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤.

> SSR ì ìš© í›„

<img width="983" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-03-06 á„‰á…µá„€á…¡á†«: 22 58 25" src="https://user-images.githubusercontent.com/56717167/223130879-35552121-0fcb-4631-9b36-2a7565e90e7f.png">

SSRì„ ì ìš© í•œ ë’¤ì—ëŠ” api ì‘ë‹µê°’ìœ¼ë¡œ ë°›ì€ ì‘í’ˆ íƒ€ì´í‹€ëª…ì´ í˜ì´ì§€ ì†ŒìŠ¤ì— ë³´ì´ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="Next"/>
        <category label="ssr"/>
        <category label="ssg"/>
        <category label="vercel"/>
        <category label="deploy"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
    <entry>
        <title type="html"><![CDATA['React PWA ë§Œë“¤ê¸°(2)']]></title>
        <id>2023-03-04-131-progressive-web-app-2</id>
        <link href="https://nostrss.me/2023-03-04-131-progressive-web-app-2"/>
        <updated>2023-03-04T00:00:00.000Z</updated>
        <content type="html"><![CDATA[

# A demo of `react-markdown`

`react-markdown` is a markdown component for React.

ğŸ‘‰ Changes are re-rendered as you type.

ğŸ‘ˆ Try writing some markdown on the left.

## Overview

- Follows [CommonMark](https://commonmark.org)
- Optionally follows [GitHub Flavored Markdown](https://github.github.com/gfm/)
- Renders actual React elements instead of using `dangerouslySetInnerHTML`
- Lets you define your own components (to render `MyHeading` instead of `h1`)
- Has a lot of plugins

## Table of contents

Here is an example of a plugin in action
([`remark-toc`](https://github.com/remarkjs/remark-toc)).
This section is replaced by an actual table of contents.

## Syntax highlighting

Here is an example of a plugin to highlight code:
[`rehype-highlight`](https://github.com/rehypejs/rehype-highlight).

```js
import React from 'react';
import ReactDOM from 'react-dom';
import ReactMarkdown from 'react-markdown';
import rehypeHighlight from 'rehype-highlight';

ReactDOM.render(
  <ReactMarkdown rehypePlugins={[rehypeHighlight]}>
    {'# Your markdown here'}
  </ReactMarkdown>,
  document.querySelector('#content')
);
```

Pretty neat, eh?

## GitHub flavored markdown (GFM)

For GFM, you can _also_ use a plugin:
[`remark-gfm`](https://github.com/remarkjs/react-markdown#use).
It adds support for GitHub-specific extensions to the language:
tables, strikethrough, tasklists, and literal URLs.

These features **do not work by default**.
ğŸ‘† Use the toggle above to add the plugin.

|    Feature | Support              |
| ---------: | :------------------- |
| CommonMark | 100%                 |
|        GFM | 100% w/ `remark-gfm` |

~~strikethrough~~

- [ ] task list
- [x] checked item

https://example.com

## HTML in markdown

âš ï¸ HTML in markdown is quite unsafe, but if you want to support it, you can
use [`rehype-raw`](https://github.com/rehypejs/rehype-raw).
You should probably combine it with
[`rehype-sanitize`](https://github.com/rehypejs/rehype-sanitize).

<blockquote>
  ğŸ‘† Use the toggle above to add the plugin.
</blockquote>

## Components

You can pass components to change things:

```js
import React from 'react';
import ReactDOM from 'react-dom';
import ReactMarkdown from 'react-markdown';
import MyFancyRule from './components/my-fancy-rule.js';

ReactDOM.render(
  <ReactMarkdown
    components={{
      // Use h2s instead of h1s
      h1: 'h2',
      // Use a component instead of hrs
      hr: ({ node, ...props }) => <MyFancyRule {...props} />,
    }}
  >
    # Your markdown here
  </ReactMarkdown>,
  document.querySelector('#content')
);
```

## More info?

Much more info is available in the
[readme on GitHub](https://github.com/remarkjs/react-markdown)!

---

A component by [Espen Hovlandsdal](https://espen.codes/)
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="react"/>
        <category label="pwa"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
    <entry>
        <title type="html"><![CDATA['React PWA ë§Œë“¤ê¸°(1)']]></title>
        <id>2023-03-04-130-progressive-web-app</id>
        <link href="https://nostrss.me/2023-03-04-130-progressive-web-app"/>
        <updated>2023-03-04T00:00:00.000Z</updated>
        <content type="html"><![CDATA[

## PWAë€?

- Progressive Web Appsì˜ ì•½ìì´ë‹¤.
- html,css,javascriptì™€ ê°™ì€ ì›¹ê¸°ìˆ ë¡œ ë§Œë“œëŠ” Appì´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤. ë§ˆì¹˜ Webê³¼ Appì˜ ê²½ê³„ì‚¬ì´ì— ìˆëŠ” ëŠë‚Œì´ë‹¤.
- ë°”íƒ•í™”ë©´ì— ì›¹í˜ì´ì§€ë¥¼ ì¦ê²¨ì°¾ê¸° í•´ë‘” ê²ƒì²˜ëŸ¼ ê°„ë‹¨í•´ ë³´ì´ê¸°ë„ í•˜ê³ , Webì„ íŒ¨í‚¤ì§•í•œ í•˜ì´ë¸Œë¦¬ë“œ ì•±ì²˜ëŸ¼ ë³´ì´ê¸°ë„ í•œë‹¤.
- êµ¬ê¸€,MSì—ì„œëŠ” PWA ì‚¬ìš©ê³¼ ë³´ê¸‰ì— ì ê·¹ì ì´ì§€ë§Œ Appleì€ ì´ì— ì†Œê·¹ì ì´ë¼ê³  í•œë‹¤.

### Register Store(?)

- ì§ì ‘ í•´ë³´ì§€ëŠ” ì•Šì•˜ì§€ë§Œ ì´ë ‡ê²Œ ìƒì„±í•œ Appì„ ì´ë¡ ì (?)ìœ¼ë¡œ êµ¬ê¸€í”Œë ˆì´ ìŠ¤í† ì–´ì™€ ì• í”Œ ì•± ìŠ¤í† ì–´ì— ë“±ë¡ í•  ìˆ˜ ìˆë‹¤ê³  í•œë‹¤.
- ê²€ìƒ‰ì„ í•´ë³´ë‹ˆ êµ¬ê¸€ì€ ì‚¬ë¡€ê°€ ë§ì´ ë³´ì˜€ëŠ”ë°, ì• í”Œì˜ ì•± ìŠ¤í† ì–´ì˜ ê²½ìš°ì—ëŠ” ì°¾ì„ ìˆ˜ê°€ ì—†ì—ˆë‹¤. ì• í”Œì€ ì‹¬ì‚¬í†µê³¼ê°€ ë˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆì„ ê²ƒ ê°™ë‹¤.

### reference

[PWA-builder](https://www.pwabuilder.com/)

[Getting started with Progressive Web Apps](https://developer.chrome.com/blog/getting-started-pwa/)

### PWA ì˜ˆì‹œ

ìŠ¤íƒ€ë²…ìŠ¤ í™ˆí˜ì´ì§€ê°€ PWAê°€ ì ìš©ì´ ë˜ì–´ìˆë‹¤.

[Starbucks ë°”ë¡œê°€ê¸°](https://app.starbucks.com/)

ìœ„ì˜ ë§í¬ë¥¼ íƒ€ê³  ì ‘ì†í•˜ë©´ ì£¼ì†Œì°½ ìš°ì¸¡ì— ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ì´ ìˆëŠ”ë°, í´ë¦­í•˜ë©´ PWAê°€ ë‹¤ìš´ë¡œë“œ ëœë‹¤.
ë‹¤ìš´ë¡œë“œ ëœ PWAë¥¼ ì‹¤í–‰ì‹œí‚¤ë©´ ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë§ˆì¹˜ APPì„ ì‹¤í–‰ì‹œí‚¨ë“¯í•œ í™”ë©´ì´ ë‚˜íƒ€ë‚œë‹¤.

<img width="1392" alt="ìŠ¤íƒ€ë²…ìŠ¤-pwa" src="https://user-images.githubusercontent.com/56717167/222894533-c992be4a-8da3-45a0-be71-aa91e5c142d7.png">

## REACTì— PWA ì ìš©í•˜ê¸°

### 1.React Set up

> npx create-react-app pwa

### 2.Install gh-pages and package.json setting

- git-hub pagesì— ë°°í¬í•´ì„œ ë³´ê¸° ìœ„í•˜ì—¬ gh-pagesë¥¼ ì„¤ì¹˜í•˜ì—¬ ê°„ë‹¨íˆ ë°°í¬ë¥¼ ìœ„í•œ ì„¸íŒ…ì„ í–ˆë‹¤.

> npm i gh-pages

- package.jsonì— ë°°í¬ script ì¶”ê°€

```json
//package.json
...
"homepage": "http://nostrss.github.io/pwa", //ì¶”ê°€
...
"predeploy": "npm run build", //ì¶”ê°€
"deploy": "cp build/index.html build/404.html && gh-pages -d build" //ì¶”ê°€
```

### 3.Add service-worker

ì•„ë˜ 2ê°œì˜ íŒŒì¼ì„ root ìœ„ì¹˜ì— ì‘ì„±í•˜ì—¬ ì¶”ê°€í•´ì¤¬ë‹¤.

- service-worker.js[(ì†ŒìŠ¤ì½”ë“œ)](https://github.com/nostrss/pwa/blob/main/src/service-worker.js)
- serviceWorkerRegistration.js[(ì†ŒìŠ¤ì½”ë“œ)](https://github.com/nostrss/pwa/blob/main/src/serviceWorkerRegistration.js)

ê·¸ë¦¬ê³  index.jsíŒŒì¼ì— service-workerë¥¼ ë“±ë¡í•´ì£¼ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í•´ì¤¬ë‹¤.

```javascript
import React from 'react';
import ReactDOM from 'react-dom/client';
import './index.css';
import App from './App';
import reportWebVitals from './reportWebVitals';

// ì•„ë˜ ì½”ë“œ ì¶”ê°€
import * as serviceWorkerRegistration from './serviceWorkerRegistration';

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);

// ì•„ë˜ ì½”ë“œ ì¶”ê°€
serviceWorkerRegistration.register();

// If you want to start measuring performance in your app, pass a function
// to log results (for example: reportWebVitals(console.log))
// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals
reportWebVitals();
```

### 4.Deploy

> npm run deploy

- ë°°í¬ í›„ í˜ì´ì§€ì— ì ‘ì†í•´ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ ì£¼ì†Œì°½ ì˜†ì— ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ì´ ìƒê¸°ê²Œ ëœë‹¤.

<img width="289" alt="pwa download" src="https://user-images.githubusercontent.com/56717167/222895638-511b912b-c209-493e-92e1-4d53d2cf4e99.png">

- ë‹¤ìš´ë¡œë“œ í›„ ì‹¤í–‰ í•´ë³´ë©´ ì•„ê¹Œ ë³¸ ìŠ¤íƒ€ë²…ìŠ¤ PWAì²˜ëŸ¼ ë‚´ê°€ ë§Œë“  PWAê°€ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

<img width="1066" alt="starbucks pwa" src="https://user-images.githubusercontent.com/56717167/222895749-75632375-a731-41fd-8fd6-7dff04e58b2a.png">

### 5. PWA Analyze

- ì•ˆë“œë¡œì´ë“œ, iOSì•±ì— ë°°í¬ ì‹œ ì‹¬ì‚¬ë¥¼ ë°›ë“¯ì´, PWAë„ ì¡°ê±´ì„ ì¶©ë¶„ì´ ì¶©ì¡±í•˜ëŠ”ì§€ ê²€ì‚¬í•˜ëŠ” ë°©ë²•ì´ ëª‡ê°€ì§€ ì¡´ì¬í•œë‹¤.

#### Lighthouse

- Chrome ê°œë°œì ë„êµ¬ > Lighthouse ì—ì„œ ì§ì ‘ ê²€ì‚¬ë¥¼ í•´ë³¼ ìˆ˜ ìˆë‹¤.
- ê²€ì‚¬ í›„ ì–´ë–¤ ì ì´ ë¶€ì¡±í•œì§€ ê²°ê³¼ì™€ ì–´ë–»ê²Œ ìˆ˜ì •í•´ì•¼í•˜ëŠ”ì§€ ê°€ì´ë“œë„ ë³¼ ìˆ˜ ìˆë‹¤.

<img width="1274" alt="lighthouse" src="https://user-images.githubusercontent.com/56717167/222896054-0529dfc0-a03b-4d96-8867-951447b21cb9.png">

#### Pwa-builder

[PWA-builder](https://www.pwabuilder.com/)

- ë§í¬ì— ì ‘ì†í•˜ì—¬, URLì„ ì…ë ¥í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ê²°ê³¼ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.

<img width="1323" alt="pwa builder" src="https://user-images.githubusercontent.com/56717167/222896320-d0a2ca70-ebb5-4063-a405-7b32fba60390.png">

- ê·¸ë¦¬ê³  ì—¬ê¸°ì„œ OSë³„(ì•ˆë“œë¡œì´ë“œ,ì• í”Œ ë“±) íŒ¨í‚¤ì§€ë¥¼ ë‹¤ìš´ë¡œë“œ ë°›ì„ ìˆ˜ê°€ ìˆë‹¤.
- ì´ íŒ¨í‚¤ì§€ë¥¼ ì–´ë–¤ ì¶”ê°€ì ì¸ ê³¼ì •ì„ ê±°ì³ì„œ ìŠ¤í† ì–´ì— ë“±ë¡í•  ìˆ˜ ìˆë‹¤ê³  í•œë‹¤.
- ì‹¤ì œ ê°€ëŠ¥í•˜ë‹¤ë©´, ì–´ë–¤ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ ë•Œ ì´ˆê¸°ì— Native Appì„ ë”°ë¡œ ë§Œë“¤ì§€ ì•Šê³  í™œìš©í•  ìˆ˜ ìˆì„ ë“¯í•˜ë‹¤.

<img width="674" alt="íŒ¨í‚¤ì§€ ë‹¤ìš´ë¡œë“œ" src="https://user-images.githubusercontent.com/56717167/222896680-de633d40-341a-49e2-9c2c-aebed3a18722.png">

### ETC

- ë‚˜ëŠ” ì§ì ‘ service-workerë¥¼ ìƒì„±í–ˆì—ˆëŠ”ë°, ì•Œê³ ë³´ë‹ˆ ë” ì‰¬ìš´ ë°©ë²•ì´ ìˆì—ˆë‹¤.
- ì•„ë˜ì˜ ì»¤ë§¨ë“œë¡œ react templateë¥¼ ì„¤ì¹˜í•˜ë©´ ë” ì‰½ê²Œ PWAë¥¼ ì ìš©í•  ìˆ˜ ìˆë‹¤.

JavaScript

> npx create-react-app my-app --template cra-template-pwa

TypeScript

> npx create-react-app my-app --template cra-template-pwa-typescript
]]></content>
        <author>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </author>
        <category label="react"/>
        <category label="pwa"/>
        <contributor>
            <name>Nostrss</name>
            <email>jintagi@gmail.com</email>
            <uri>https://github.com/nostrss</uri>
        </contributor>
    </entry>
</feed>